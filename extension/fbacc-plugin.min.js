var FBAdPlugin=function(e){"use strict";const t={VERSION:"6.4",FB_API_VERSION:"v19.0",VALID_PATHS:["/adsmanager/manage/campaigns","/ads/creativehub/home/","/adsmanager/manage/all","/adsmanager/manage/ads","/adsmanager/manage/adsets"],GRAPHQL_DOC_IDS:{AD_ACCOUNT_APPEAL:"5197966936890203",AD_ACCOUNT_DELETE:"4787981637941330",AD_ACCOUNT_REMOVE_ACCESS:"5123456789012345",PAGE_APPEAL:"5197966936890203",PAGE_DELETE:"4899485650107392",PAGE_UNHIDE:"4920939114687785",BM_CREATE:"4787981637941333",BM_ADD_USER:"4787981637941334",BM_ADD_AD_ACCOUNT:"4787981637941335",BM_REQUEST_AD_ACCOUNT:"4787981637941336",ADD_CREDIT_CARD:"4896364773778784"},COOKIES:{USER_ID:"i_user"},CURRENCY_SYMBOLS:{USD:"$",EUR:"€",CRC:"₡",GBP:"£",ILS:"₪",INR:"₹",JPY:"¥",KRW:"₩",NGN:"₦",PHP:"₱",PLN:"zł",PYG:"₲",THB:"฿",UAH:"₴",VND:"₫"}};function n(e){const t=`; ${document.cookie}`.split(`; ${e}=`);if(2===t.length)return t.pop().split(";").shift()}function o(e){return new URLSearchParams(window.location.search).get(e)}async function s(e){if(navigator.clipboard&&navigator.clipboard.writeText)try{return void await navigator.clipboard.writeText(e)}catch(e){console.warn("Clipboard API failed, falling back to execCommand:",e)}try{const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.opacity="0",t.style.top="0",t.style.left="0",document.body.appendChild(t),t.focus(),t.select();const n=document.execCommand("copy");if(document.body.removeChild(t),!n)throw new Error("execCommand copy failed")}catch(e){throw console.error("Failed to copy text to clipboard:",e),new Error("Could not copy to clipboard")}}function a(e,t=4){if(!e||e.length<=t)return e;return e.substring(0,t)+"*".repeat(e.length-t)}function c(){return void 0!==n(t.COOKIES.USER_ID)}function r(){const e=c();console.log("Is page auth?",e),console.log("Looking for access token...");const t=document.getElementsByTagName("script");let n="",s="";const a=o("act"),r=/selected_account_id:"(.*?)"/i,d=/"(EA[A-Za-z0-9]{20,})"/;for(let e=0;e<t.length;e++){const o=t[e].innerHTML;if(!n){const e=d.exec(o);e&&e[1]&&(n=e[1],console.log("Access token found"))}if(!a&&!s){const e=r.exec(o);e&&e[1]&&(s=e[1],console.log("Account ID found:",s))}}return a&&(s=a.replace("act=","")),{token:n,accountId:s,isPageAuth:e}}const d=`https://graph.facebook.com/${t.FB_API_VERSION}`;async function i(e,t={}){const{method:n="GET",params:o={},accessToken:s=null}=t;if(!s)throw new Error("Access token is required. Please pass it explicitly.");const a=s;let c,r={method:n};if(["POST","PUT","PATCH"].includes(n)){const t=new URLSearchParams({access_token:a});c=`${d}/${e}?${t}`;const n=new URLSearchParams(o);r.headers={"Content-Type":"application/x-www-form-urlencoded"},r.body=n}else{const t=new URLSearchParams({...o,access_token:a});c=`${d}/${e}?${t}`}const i=await fetch(c,r);if(!i.ok){let t;try{t=await i.json()}catch(e){throw console.error("Failed to parse API error response as JSON:",e),new Error(`API request failed with status ${i.status}: ${i.statusText}`)}console.error("Facebook API Error Details:",{status:i.status,statusText:i.statusText,error:t.error,endpoint:e});const n=t.error?.message||"API request failed",o=t.error?.code||"UNKNOWN",s=t.error?.type||"Unknown";throw new Error(`${n} (Code: ${o}, Type: ${s})`)}return await i.json()}async function u(e,t,n,o=null,s={}){if(!o)throw new Error("Access token is required. Please pass it explicitly.");const a=o,c=new URLSearchParams;c.append("access_token",a);for(const[e,t]of Object.entries(s))c.append(e,t);c.append("doc_id",e),c.append("variables",JSON.stringify(t)),c.append("fb_api_req_friendly_name",n),c.append("fb_api_caller_class","RelayModern");const r=await fetch("https://www.facebook.com/api/graphql/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const d=await r.json();if(d.errors&&d.errors.length>0)throw new Error(d.errors[0].message);return d}const l=["id","name","account_status","disable_reason","currency","timezone_name"],p=["amount_spent","balance","funding_source_details"];async function m(e,n){try{const o={input:{client_mutation_id:"1",actor_id:e,ad_account_id:e,ids_issue_ent_id:"1",appeal_comment:"I'm not sure which policy was violated.",callsite:"ACCOUNT_QUALITY"}};return{success:!0,message:"Ad account appeal submitted successfully",data:await u(t.GRAPHQL_DOC_IDS.AD_ACCOUNT_APPEAL,o,"useAdAccountALRAppealMutation",n)}}catch(e){return console.error("Error appealing ad account:",e),{success:!1,message:e.message,error:e}}}async function g(e,n){try{const o={input:{ad_account_id:e,actor_id:e,client_mutation_id:"1"}};return{success:!0,message:"Ad account deleted successfully",data:await u(t.GRAPHQL_DOC_IDS.AD_ACCOUNT_DELETE,o,"AdAccountDeleteMutation",n)}}catch(e){return console.error("Error deleting ad account:",e),{success:!1,message:e.message,error:e}}}async function y(e,n,o){try{const s={input:{account_id:e,user_id:n,client_mutation_id:"1"}};return{success:!0,message:"Ad account access removed successfully",data:await u(t.GRAPHQL_DOC_IDS.AD_ACCOUNT_REMOVE_ACCESS,s,"RemoveAdAccountAccessMutation",o)}}catch(e){return console.error("Error removing ad account access:",e),{success:!1,message:e.message,error:e}}}async function f(e,t){try{const n=[{method:"GET",endpoint:`act_${e}`,params:{fields:l.join(",")}},{method:"GET",endpoint:`act_${e}`,params:{fields:p.join(",")}}],[o,s]=await async function(e,t=null){if(!t)throw new Error("Access token is required. Please pass it explicitly.");const n=t,o=e.map(e=>({method:e.method||"GET",relative_url:e.endpoint+(e.params?`?${new URLSearchParams(e.params)}`:"")})),s=new URLSearchParams({access_token:n,batch:JSON.stringify(o)}),a=`${d}?${s}`,c=await fetch(a,{method:"POST"});if(!c.ok)throw new Error("Batch request failed");return(await c.json()).map(e=>200!==e.code?{success:!1,error:JSON.parse(e.body)}:{success:!0,data:JSON.parse(e.body)})}(n,t);if(!o.success)throw new Error(o.error?.error?.message||"Failed to fetch basic account details");let a=o.data;if(s.success)a={...a,...s.data};else{const e=s.error?.error?.message||"Permission denied";console.warn("Could not fetch sensitive account fields (this is normal if token lacks permissions):",e)}return{success:!0,data:a}}catch(e){return console.error("Error getting ad account details:",e),{success:!1,message:e.message,error:e}}}var w={appealAdAccount:m,deleteAdAccount:g,removeAdAccountAccess:y,getAdAccountDetails:f},E=Object.freeze({__proto__:null,appealAdAccount:m,default:w,deleteAdAccount:g,getAdAccountDetails:f,removeAdAccountAccess:y});function h(e,t,n={}){const{width:o="600px",height:s="auto",className:a="fb-plugin-popup"}=n;A();const c=document.createElement("div");c.id="fb-plugin-popup",c.className=a,c.style.cssText=`\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: ${o};\n    max-height: 80vh;\n    background: white;\n    border-radius: 8px;\n    box-shadow: 0 4px 20px rgba(0,0,0,0.3);\n    z-index: 10000;\n    overflow: auto;\n  `;const r=document.createElement("div");r.style.padding="20px";const d=document.createElement("div");d.style.cssText="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;";const i=document.createElement("h3");i.style.margin="0",i.textContent=e;const u=document.createElement("button");u.setAttribute("data-action","close-popup"),u.style.cssText="background: none; border: none; font-size: 24px; cursor: pointer;",u.textContent="×",u.addEventListener("click",A);const l=document.createElement("div");if(t instanceof Node)l.appendChild(t);else{console.error("showPopup: content must be a DOM Node for security. HTML strings are not supported.");const e=document.createElement("p");e.textContent="Error: Invalid content provided",e.style.color="red",l.appendChild(e)}d.appendChild(i),d.appendChild(u),r.appendChild(d),r.appendChild(l),c.appendChild(r);const p=document.createElement("div");return p.id="fb-plugin-overlay",p.style.cssText="\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0,0,0,0.5);\n    z-index: 9999;\n  ",p.addEventListener("click",A),document.body.appendChild(p),document.body.appendChild(c),c}function A(){const e=document.getElementById("fb-plugin-popup"),t=document.getElementById("fb-plugin-overlay");e&&e.remove(),t&&t.remove()}function _(e,t){const n=document.getElementById(t);n?e instanceof Node?n.appendChild(e):console.error("appendTab: content must be a DOM Node for security. HTML strings are not supported."):console.warn(`Tab element with ID "${t}" not found`)}function b(e,t,n){_(e,t),n&&"function"==typeof n&&n()}function C(e,t){const n=document.getElementById(t);n?(n.textContent="",e instanceof Node?n.appendChild(e):console.error("setTab: content must be a DOM Node for security. HTML strings are not supported.")):console.warn(`Tab element with ID "${t}" not found`)}function x(e,t,n={}){const{type:o="text",placeholder:s="",required:a=!1,value:c=""}=n,r=document.createElement("div");r.style.marginBottom="15px";const d=document.createElement("label");if(d.setAttribute("for",t),d.style.cssText="display: block; margin-bottom: 5px; font-weight: 500;",d.textContent=e,a){const e=document.createElement("span");e.style.color="red",e.textContent=" *",d.appendChild(e)}const i=document.createElement("input");return i.type=o,i.id=t,i.placeholder=s,i.value=c,a&&(i.required=!0),i.style.cssText="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;",r.append(d,i),r}async function T(e,n,o,s,a,c,r,d){try{const i={input:{credit_card_id:e,payment_type:"MOR_ADS_INVOICE",new_credit_card:{credit_card_number:o,platform_trust_token:null,csc:c,expiry_month:parseInt(a),expiry_year:parseInt(s),billing_address:{country_code:r}},actor_id:n,client_mutation_id:Date.now().toString()}};return{success:!0,message:"Credit card added successfully",data:await u(t.GRAPHQL_DOC_IDS.ADD_CREDIT_CARD,i,"useFBAAddCreditCardMutation",d,{paymentAccountID:e})}}catch(e){return console.error("Error adding credit card:",e),{success:!1,message:e.message,error:e}}}function v(){const e=document.createElement("div");e.id="add-cc-form",e.appendChild(x("Card Number:","cc-number",{placeholder:"1234 5678 9012 3456"}));const t=document.createElement("div");t.style.cssText="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 15px;";const n=x("Month:","cc-month",{placeholder:"MM"});n.style.marginBottom="0";const o=x("Year:","cc-year",{placeholder:"YYYY"});o.style.marginBottom="0";const s=x("CVC:","cc-cvc",{placeholder:"123"});s.style.marginBottom="0",t.append(n,o,s),e.appendChild(t),e.appendChild(x("Country Code:","cc-country",{placeholder:"US"}));const a=document.createElement("div");a.style.textAlign="right";const c=document.createElement("button");c.setAttribute("data-action","cancel"),c.textContent="Cancel",c.style.cssText="padding: 10px 20px; margin-right: 10px; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer;",c.addEventListener("click",A);const r=document.createElement("button");r.setAttribute("data-action","submit"),r.textContent="Add Card",r.style.cssText="padding: 10px 20px; background: #1877f2; color: white; border: none; border-radius: 4px; cursor: pointer;",r.addEventListener("click",P),a.append(c,r),e.appendChild(a),h("Add Credit Card",e)}async function P(){const e=document.getElementById("cc-number")?.value,t=document.getElementById("cc-month")?.value,n=document.getElementById("cc-year")?.value,o=document.getElementById("cc-cvc")?.value,s=document.getElementById("cc-country")?.value;if(!(e&&t&&n&&o&&s))return void k("Please fill in all fields");const a=e.replace(/\s/g,"");if(!/^\d{13,19}$/.test(a))return void k("Invalid card number. Must be 13-19 digits.");if(!/^\d{2}$/.test(t)||parseInt(t)<1||parseInt(t)>12)return void k("Invalid month. Must be 01-12.");const c=(new Date).getFullYear();if(!/^\d{4}$/.test(n)||parseInt(n)<c)return void k("Invalid year. Must be current year or later.");if(!/^\d{3,4}$/.test(o))return void k("Invalid CVC. Must be 3 or 4 digits.");const r=window.PluginState?.accountId||window.selectedacc,d=window.PluginState?.socialId||window.socid,i=window.PluginState?.accessToken||window.privateToken;if(r&&d&&i)try{A();const e=await T(r,d,a,n,t,o,s.toUpperCase(),i);e.success?(alert("Credit card added successfully!"),window.mainreload&&window.mainreload()):alert(`Error adding credit card: ${e.message}`)}catch(e){console.error("Error processing credit card form:",e),alert(`Error: ${e.message}`)}else k("Account information not available. Please reload the page.")}function k(e){let t=document.getElementById("cc-form-error");if(!t){t=document.createElement("div"),t.id="cc-form-error",t.style.cssText="color: red; margin-bottom: 10px; padding: 10px; background: #fee; border-radius: 4px;";const n=document.getElementById("add-cc-form");if(!n)return void alert(e);n.insertBefore(t,n.firstChild)}t.textContent=e,t.style.display="block"}var I={addCreditCardToAccount:T,showAddCreditCardForm:v,processCreditCardForm:P},S=Object.freeze({__proto__:null,addCreditCardToAccount:T,default:I,processCreditCardForm:P,showAddCreditCardForm:v});async function D(e,n){try{const o={input:{page_id:e,appeal_reason:null,client_mutation_id:"1"}};return{success:!0,message:"Page appeal submitted successfully",data:await u(t.GRAPHQL_DOC_IDS.PAGE_APPEAL,o,"useAdAccountALRAppealMutation",n)}}catch(e){return console.error("Error appealing fanpage:",e),{success:!1,message:e.message,error:e}}}async function B(e,n){try{const o={input:{page_id:e,client_mutation_id:"1"}};return{success:!0,message:"Page deleted successfully",data:await u(t.GRAPHQL_DOC_IDS.PAGE_DELETE,o,"usePagesCometDeletePageMutation",n)}}catch(e){return console.error("Error deleting fanpage:",e),{success:!1,message:e.message,error:e}}}async function M(e,n){try{const o={input:{page_id:e,is_hidden:!1,client_mutation_id:"1"}};return{success:!0,message:"Page unhidden successfully",data:await u(t.GRAPHQL_DOC_IDS.PAGE_UNHIDE,o,"usePagesCometEditPageVisibilityMutation",n)}}catch(e){return console.error("Error unhiding fanpage:",e),{success:!1,message:e.message,error:e}}}async function O(e,t){try{const n=["id","name","category","verification_status","fan_count","is_published","is_webhooks_subscribed"];return{success:!0,data:await i(e,{params:{fields:n.join(",")},accessToken:t})}}catch(e){return console.error("Error getting page details:",e),{success:!1,message:e.message,error:e}}}var N={appealFanpage:D,deleteFanpage:B,unhideFanpage:M,getPageDetails:O},L=Object.freeze({__proto__:null,appealFanpage:D,default:N,deleteFanpage:B,getPageDetails:O,unhideFanpage:M});async function R(e,n){try{const o={input:{name:e,vertical:"OTHER",timezone_id:"1",client_mutation_id:"1"}};return{success:!0,message:"Business Manager created successfully",data:await u(t.GRAPHQL_DOC_IDS.BM_CREATE,o,"BusinessManagerCreateMutation",n)}}catch(e){return console.error("Error creating Business Manager:",e),{success:!1,message:e.message,error:e}}}async function U(e,n,o,s){try{const a={input:{business_id:e,user_id:n,role:o||"EMPLOYEE",client_mutation_id:"1"}};return{success:!0,message:"User added to Business Manager successfully",data:await u(t.GRAPHQL_DOC_IDS.BM_ADD_USER,a,"BusinessAddUserMutation",s)}}catch(e){return console.error("Error adding user to Business Manager:",e),{success:!1,message:e.message,error:e}}}async function $(e,n,o){try{const s={input:{business_id:e,ad_account_id:n,permitted_tasks:["MANAGE","ADVERTISE","ANALYZE"],client_mutation_id:"1"}};return{success:!0,message:"Ad account added to Business Manager successfully",data:await u(t.GRAPHQL_DOC_IDS.BM_ADD_AD_ACCOUNT,s,"BusinessAddAdAccountMutation",o)}}catch(e){return console.error("Error adding ad account to Business Manager:",e),{success:!1,message:e.message,error:e}}}async function z(e,n,o){try{const s={input:{business_id:e,ad_account_id:n,permitted_tasks:["MANAGE","ADVERTISE","ANALYZE"],client_mutation_id:"1"}};return{success:!0,message:"Ad account access requested successfully",data:await u(t.GRAPHQL_DOC_IDS.BM_REQUEST_AD_ACCOUNT,s,"BusinessRequestAdAccountAccessMutation",o)}}catch(e){return console.error("Error requesting ad account access:",e),{success:!1,message:e.message,error:e}}}function F(){const e=document.createElement("div");e.id="add-bm-form";const t=document.createElement("div");t.style.marginBottom="15px";const n=document.createElement("label");n.style.cssText="display: block; margin-bottom: 5px;",n.textContent="Business Manager Name:";const o=document.createElement("input");o.type="text",o.id="bm-name",o.placeholder="Enter Business Manager name",o.style.cssText="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;",t.append(n,o);const s=document.createElement("div");s.style.textAlign="right";const a=document.createElement("button");a.setAttribute("data-action","cancel"),a.textContent="Cancel",a.style.cssText="padding: 10px 20px; margin-right: 10px; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer;",a.addEventListener("click",A);const c=document.createElement("button");c.setAttribute("data-action","submit"),c.textContent="Create BM",c.style.cssText="padding: 10px 20px; background: #1877f2; color: white; border: none; border-radius: 4px; cursor: pointer;",c.addEventListener("click",G),s.append(a,c),e.append(t,s),h("Add Business Manager",e)}async function G(){const e=document.getElementById("bm-name");if(!e)return void console.error("BM name input element not found");const t=e.value.trim();if(!t)return void alert("Please enter a Business Manager name");const n=window.PluginState?.accessToken||window.privateToken;if(n)try{const e=await R(t,n);e.success?(alert(`Business Manager "${t}" created successfully!`),A(),window.mainreload&&window.mainreload()):alert(`Error: ${e.message}`)}catch(e){console.error("Error processing BM creation:",e),alert(`Error: ${e.message}`)}else alert("Access token not available")}var H={addBusinessManager:R,addUserToBusinessManager:U,addAdAccountToBusinessManager:$,requestAdAccountAccess:z,showAddBusinessManagerForm:F,processAddBusinessManager:G},Y=Object.freeze({__proto__:null,addAdAccountToBusinessManager:$,addBusinessManager:R,addUserToBusinessManager:U,default:H,processAddBusinessManager:G,requestAdAccountAccess:z,showAddBusinessManagerForm:F});async function j(e,t,n){try{const o=await i(`act_${e}`,{method:"POST",params:{currency:t.toUpperCase()},accessToken:n});return{success:!0,message:`Currency updated to ${t} successfully`,data:o}}catch(e){return console.error("Error updating currency:",e),{success:!1,message:e.message,error:e}}}async function V(e,t,n){try{return{success:!0,message:"Timezone updated successfully",data:await i(`act_${e}`,{method:"POST",params:{timezone_id:t},accessToken:n})}}catch(e){return console.error("Error updating timezone:",e),{success:!1,message:e.message,error:e}}}function q(){const e=Object.keys(t.CURRENCY_SYMBOLS),n=document.createElement("div");n.id="edit-currency-form";const o=document.createElement("div");o.style.marginBottom="15px";const s=document.createElement("label");s.style.cssText="display: block; margin-bottom: 5px;",s.textContent="Select Currency:";const a=document.createElement("select");a.id="currency-select",a.style.cssText="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;",e.forEach(e=>{const n=t.CURRENCY_SYMBOLS[e],o=document.createElement("option");o.value=e,o.textContent=`${e} (${n})`,a.appendChild(o)}),o.append(s,a);const c=document.createElement("div");c.style.textAlign="right";const r=document.createElement("button");r.setAttribute("data-action","cancel"),r.textContent="Cancel",r.style.cssText="padding: 10px 20px; margin-right: 10px; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer;",r.addEventListener("click",A);const d=document.createElement("button");d.setAttribute("data-action","submit"),d.textContent="Update Currency",d.style.cssText="padding: 10px 20px; background: #1877f2; color: white; border: none; border-radius: 4px; cursor: pointer;",d.addEventListener("click",J),c.append(r,d),n.append(o,c),h("Edit Currency",n)}function Q(){const e=document.createElement("div");e.id="edit-timezone-form";const t=document.createElement("div");t.style.marginBottom="15px";const n=document.createElement("label");n.style.cssText="display: block; margin-bottom: 5px;",n.textContent="Select Timezone:";const o=document.createElement("select");o.id="timezone-select",o.style.cssText="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;",["America/New_York","America/Chicago","America/Denver","America/Los_Angeles","Europe/London","Europe/Paris","Asia/Tokyo","Asia/Shanghai","Asia/Dubai","Australia/Sydney"].forEach(e=>{const t=document.createElement("option");t.value=e,t.textContent=e.replace(/_/g," "),o.appendChild(t)}),t.append(n,o);const s=document.createElement("div");s.style.textAlign="right";const a=document.createElement("button");a.setAttribute("data-action","cancel"),a.textContent="Cancel",a.style.cssText="padding: 10px 20px; margin-right: 10px; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer;",a.addEventListener("click",A);const c=document.createElement("button");c.setAttribute("data-action","submit"),c.textContent="Update Timezone",c.style.cssText="padding: 10px 20px; background: #1877f2; color: white; border: none; border-radius: 4px; cursor: pointer;",c.addEventListener("click",K),s.append(a,c),e.append(t,s),h("Edit Timezone",e)}async function J(){const e=document.getElementById("currency-select");if(!e)return void console.error("Currency select element not found");const t=e.value,n=window.PluginState?.accountId||window.selectedacc,o=window.PluginState?.accessToken||window.privateToken;if(n&&o)try{const e=await j(n,t,o);e.success?(alert(`Currency updated to ${t} successfully!`),A(),window.mainreload&&window.mainreload()):alert(`Error: ${e.message}`)}catch(e){console.error("Error processing currency update:",e),alert(`Error: ${e.message}`)}else alert("Account information not available")}async function K(){const e=document.getElementById("timezone-select");if(!e)return void console.error("Timezone select element not found");const t=e.value,n=window.PluginState?.accountId||window.selectedacc,o=window.PluginState?.accessToken||window.privateToken;if(n&&o)try{const e=await V(n,t,o);e.success?(alert("Timezone updated successfully!"),A(),window.mainreload&&window.mainreload()):alert(`Error: ${e.message}`)}catch(e){console.error("Error processing timezone update:",e),alert(`Error: ${e.message}`)}else alert("Account information not available")}function Z(e){return t.CURRENCY_SYMBOLS[e]||e}var W={updateAccountCurrency:j,updateAccountTimezone:V,showEditCurrencyForm:q,showEditTimezoneForm:Q,processEditCurrency:J,processEditTimezone:K,getCurrencySymbol:Z},X=Object.freeze({__proto__:null,default:W,getCurrencySymbol:Z,processEditCurrency:J,processEditTimezone:K,showEditCurrencyForm:q,showEditTimezoneForm:Q,updateAccountCurrency:j,updateAccountTimezone:V});function ee(){!function(){const e=document.getElementById("fb-ads-plugin-popup");e&&e.remove()}();const e=document.createElement("div");e.id="fb-ads-plugin-popup",e.style.cssText="\n    position: fixed;\n    top: 60px;\n    right: 20px;\n    width: 400px;\n    max-height: calc(100vh - 100px);\n    background: white;\n    border-radius: 8px;\n    box-shadow: 0 4px 20px rgba(0,0,0,0.2);\n    z-index: 9999;\n    overflow: auto;\n    display: none;\n  ";const t=document.createElement("div");t.style.cssText="padding: 15px; border-bottom: 1px solid #ddd;";const n=document.createElement("div");n.style.cssText="display: flex; justify-content: space-between; align-items: center;";const o=document.createElement("h3");o.style.cssText="margin: 0; font-size: 16px;",o.textContent="FB Ads Manager Plugin";const s=document.createElement("button");s.setAttribute("data-action","close"),s.style.cssText="background: none; border: none; font-size: 24px; cursor: pointer; padding: 0; width: 30px; height: 30px;",s.textContent="×",s.addEventListener("click",se),n.appendChild(o),n.appendChild(s),t.appendChild(n);const a=document.createElement("div");a.id="plugin-content",a.style.cssText="padding: 15px;";["dblock1","dblock1cc","dblock2","dblock3","dblock4"].forEach(e=>{const t=document.createElement("div");t.id=e,t.style.marginBottom="15px",a.appendChild(t)}),e.appendChild(t),e.appendChild(a),document.body.appendChild(e)}function te(){const e=document.getElementById("fb-ads-plugin-popup");e?e.style.display="block":(ee(),te())}function ne(){const e=document.getElementById("fb-ads-plugin-popup");e&&(e.style.display="none")}function oe(){const e=document.getElementById("fb-ads-plugin-popup");if(!e)return ee(),void te();"none"===e.style.display||""===e.style.display?te():ne()}function se(){ne()}function ae(){ne()}function ce(){te()}async function re(e,t="GET"){const n=await fetch(e,{method:t});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}const de={initialized:!1,accessToken:null,accountId:null,isPageAuth:!1};function ie(){if(console.log(`Facebook Ads Manager Plugin v${t.VERSION}`),!t.VALID_PATHS.some(e=>window.location.pathname===e))return void console.log("Not on ads manager page. Plugin will remain inactive until you navigate to ads manager.");const e=r();de.accessToken=e.token,de.accountId=e.accountId,de.isPageAuth=e.isPageAuth,de.accessToken?(console.log("Access token obtained successfully"),ee(),document.addEventListener("keydown",function(e){"Escape"===e.key&&se(),(e.ctrlKey||e.metaKey)&&e.shiftKey&&"f"===e.key&&(e.preventDefault(),oe())}),async function(){try{if(c(),de.accountId){const e=await f(de.accountId,de.accessToken);e.success&&function(e){const t=Z(e.currency),n=document.createElement("div");n.style.cssText="padding: 10px; background: #f5f5f5; border-radius: 4px; margin-bottom: 10px;";const o=document.createElement("h4");o.style.cssText="margin: 0 0 10px 0;",o.textContent="Account Info",n.appendChild(o);const s=(e,t)=>{const n=document.createElement("p");n.style.cssText="margin: 5px 0;";const o=document.createElement("strong");o.textContent=e+": ";const s=document.createTextNode(t||"N/A");return n.append(o,s),n};if(n.append(s("Name",e.name),s("ID",e.id),s("Status",e.account_status),s("Currency",`${t} ${e.currency||"N/A"}`),s("Timezone",e.timezone_name)),C(n,"dblock1"),e.funding_source_details){const t=document.createElement("div");t.style.cssText="padding: 10px; background: #f5f5f5; border-radius: 4px;";const n=document.createElement("h4");n.style.cssText="margin: 0 0 10px 0;",n.textContent="Payment Method",t.appendChild(n);const o=document.createElement("p");o.style.cssText="margin: 5px 0;";const s=document.createElement("strong");s.textContent="Card: ";const a=document.createTextNode(e.funding_source_details.display_string||"No card on file"),c=document.createElement("a");c.href="#",c.setAttribute("data-action","add-credit-card"),c.textContent="add",c.addEventListener("click",e=>{e.preventDefault(),v()}),o.append(s,a," [",c,"]"),t.appendChild(o),C(t,"dblock1cc")}}(e.data)}te()}catch(e){console.error("Error loading initial data:",e)}}(),de.initialized=!0,console.log("Plugin initialized successfully")):console.error("Failed to get access token")}function ue(){console.warn("FBACCPlugin: exposeGlobalAPI() is deprecated and pollutes the global namespace. Use the FBACCPlugin namespace instead."),window.PluginState=de,window.CONFIG=t,window.getAccessToken=r,window.checkauth=c,window.mainclose=se,window.mainhide=ae,window.mainunhide=ce,window.togglePluginPopup=oe,window.showPluginPopup=te,window.hidePluginPopup=ne,window.appendtab=_,window.appendtabplus=b,window.getCookie=n,window.getURLParameter=o,window.copytocb=s,window.shadowtext=a,window.getJSON=re,window.showAddCreditCardForm=v,window.processCreditCardForm=P,window.addCreditCardToAccount=T,window.appealadsacc=m,window.deladacc=g,window.remadacc=y,window.appealfp=D,window.delfp=B,window.unhidefp=M,window.showAddBM=F,window.ShowEditcurr=q,window.ShowEdittzone=Q,window.processEditCurrency=J,window.processEditTimezone=K,window.processAddBusinessManager=G}return console.log("Facebook Ads Manager Plugin loading..."),window.FBACCPlugin={getState:()=>JSON.parse(JSON.stringify(de)),getConfig:()=>JSON.parse(JSON.stringify(t)),Auth:{getAccessToken:r,checkAuth:c},Popup:{close:se,hide:ae,unhide:ce,toggle:oe,show:te,hidePopup:ne},Utils:{getCookie:n,getURLParameter:o,copyToClipboard:s,shadowText:a,getJSON:re},AdAccount:E,CreditCard:S,Fanpage:L,BusinessManager:Y,Settings:X,exposeGlobalAPI:ue,version:t.VERSION},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",ie):ie(),e.PluginState=de,e.exposeGlobalAPI=ue,e.initialize=ie,e}({});
//# sourceMappingURL=fbacc-plugin.min.js.map
