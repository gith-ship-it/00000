var FBAdPlugin=function(e){"use strict";const t={VERSION:"6.4",FB_API_VERSION:"v19.0",VALID_PATHS:["/adsmanager/manage/campaigns","/ads/creativehub/home/","/adsmanager/manage/all","/adsmanager/manage/ads","/adsmanager/manage/adsets"],GRAPHQL_DOC_IDS:{AD_ACCOUNT_APPEAL:"5197966936890203",AD_ACCOUNT_DELETE:"4787981637941330",AD_ACCOUNT_REMOVE_ACCESS:"5123456789012345",PAGE_APPEAL:"5197966936890203",PAGE_DELETE:"4899485650107392",PAGE_UNHIDE:"4920939114687785",BM_CREATE:"4787981637941333",BM_ADD_USER:"4787981637941334",BM_ADD_AD_ACCOUNT:"4787981637941335",BM_REQUEST_AD_ACCOUNT:"4787981637941336",ADD_CREDIT_CARD:"4896364773778784"},COOKIES:{USER_ID:"i_user"},CURRENCY_SYMBOLS:{USD:"$",EUR:"€",CRC:"₡",GBP:"£",ILS:"₪",INR:"₹",JPY:"¥",KRW:"₩",NGN:"₦",PHP:"₱",PLN:"zł",PYG:"₲",THB:"฿",UAH:"₴",VND:"₫"}};function n(e){const t=`; ${document.cookie}`.split(`; ${e}=`);if(2===t.length)return t.pop().split(";").shift()}function o(e){return new URLSearchParams(window.location.search).get(e)}async function c(e){if(navigator.clipboard&&navigator.clipboard.writeText)try{return void await navigator.clipboard.writeText(e)}catch(e){console.warn("Clipboard API failed, falling back to execCommand:",e)}try{const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.opacity="0",t.style.top="0",t.style.left="0",document.body.appendChild(t),t.focus(),t.select();const n=document.execCommand("copy");if(document.body.removeChild(t),!n)throw new Error("execCommand copy failed")}catch(e){throw console.error("Failed to copy text to clipboard:",e),new Error("Could not copy to clipboard")}}function a(e,t=4){if(!e||e.length<=t)return e;return e.substring(0,t)+"*".repeat(e.length-t)}function s(){return void 0!==n(t.COOKIES.USER_ID)}function r(){const e=s();console.log("Is page auth?",e),console.log("Looking for access token...");const t=document.getElementsByTagName("script");let n="",c="";const a=o("act"),r=/selected_account_id:"(.*?)"/i,d=/"(EA[A-Za-z0-9]{20,})"/;for(let e=0;e<t.length;e++){const o=t[e].innerHTML;if(!n){const e=d.exec(o);e&&e[1]&&(n=e[1],console.log("Access token found"))}if(!a&&!c){const e=r.exec(o);e&&e[1]&&(c=e[1],console.log("Account ID found:",c))}}return a&&(c=a.replace("act=","")),{token:n,accountId:c,isPageAuth:e}}const d=`https://graph.facebook.com/${t.FB_API_VERSION}`;async function i(e,t={}){const{method:n="GET",params:o={},accessToken:c=null}=t;if(!c)throw new Error("Access token is required. Please pass it explicitly.");const a=c;let s,r={method:n};if(["POST","PUT","PATCH"].includes(n)){const t=new URLSearchParams({access_token:a});s=`${d}/${e}?${t}`;const n=new URLSearchParams(o);r.headers={"Content-Type":"application/x-www-form-urlencoded"},r.body=n}else{const t=new URLSearchParams({...o,access_token:a});s=`${d}/${e}?${t}`}const i=await fetch(s,r);if(!i.ok){const e=await i.json();throw new Error(e.error?.message||"API request failed")}return await i.json()}async function u(e,t,n,o=null,c={}){if(!o)throw new Error("Access token is required. Please pass it explicitly.");const a=o,s=new URLSearchParams;s.append("access_token",a);for(const[e,t]of Object.entries(c))s.append(e,t);s.append("doc_id",e),s.append("variables",JSON.stringify(t)),s.append("fb_api_req_friendly_name",n),s.append("fb_api_caller_class","RelayModern");const r=await fetch("https://www.facebook.com/api/graphql/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const d=await r.json();if(d.errors&&d.errors.length>0)throw new Error(d.errors[0].message);return d}async function l(e,n){try{const o={input:{client_mutation_id:"1",actor_id:e,ad_account_id:e,ids_issue_ent_id:"1",appeal_comment:"I'm not sure which policy was violated.",callsite:"ACCOUNT_QUALITY"}};return{success:!0,message:"Ad account appeal submitted successfully",data:await u(t.GRAPHQL_DOC_IDS.AD_ACCOUNT_APPEAL,o,"useAdAccountALRAppealMutation",n)}}catch(e){return console.error("Error appealing ad account:",e),{success:!1,message:e.message,error:e}}}async function p(e,n){try{const o={input:{ad_account_id:e,actor_id:e,client_mutation_id:"1"}};return{success:!0,message:"Ad account deleted successfully",data:await u(t.GRAPHQL_DOC_IDS.AD_ACCOUNT_DELETE,o,"AdAccountDeleteMutation",n)}}catch(e){return console.error("Error deleting ad account:",e),{success:!1,message:e.message,error:e}}}async function m(e,n,o){try{const c={input:{account_id:e,user_id:n,client_mutation_id:"1"}};return{success:!0,message:"Ad account access removed successfully",data:await u(t.GRAPHQL_DOC_IDS.AD_ACCOUNT_REMOVE_ACCESS,c,"RemoveAdAccountAccessMutation",o)}}catch(e){return console.error("Error removing ad account access:",e),{success:!1,message:e.message,error:e}}}async function g(e,t){try{const n=["id","name","account_status","disable_reason","currency","timezone_name","amount_spent","balance","funding_source_details"];return{success:!0,data:await i(`act_${e}`,{params:{fields:n.join(",")},accessToken:t})}}catch(e){return console.error("Error getting ad account details:",e),{success:!1,message:e.message,error:e}}}var y={appealAdAccount:l,deleteAdAccount:p,removeAdAccountAccess:m,getAdAccountDetails:g},f=Object.freeze({__proto__:null,appealAdAccount:l,default:y,deleteAdAccount:p,getAdAccountDetails:g,removeAdAccountAccess:m});function w(e,t,n={}){const{width:o="600px",height:c="auto",className:a="fb-plugin-popup"}=n;E();const s=document.createElement("div");s.id="fb-plugin-popup",s.className=a,s.style.cssText=`\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: ${o};\n    max-height: 80vh;\n    background: white;\n    border-radius: 8px;\n    box-shadow: 0 4px 20px rgba(0,0,0,0.3);\n    z-index: 10000;\n    overflow: auto;\n  `;const r=document.createElement("div");r.style.padding="20px";const d=document.createElement("div");d.style.cssText="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;";const i=document.createElement("h3");i.style.margin="0",i.textContent=e;const u=document.createElement("button");u.setAttribute("data-action","close-popup"),u.style.cssText="background: none; border: none; font-size: 24px; cursor: pointer;",u.textContent="×",u.addEventListener("click",E);const l=document.createElement("div");if(t instanceof Node)l.appendChild(t);else{console.error("showPopup: content must be a DOM Node for security. HTML strings are not supported.");const e=document.createElement("p");e.textContent="Error: Invalid content provided",e.style.color="red",l.appendChild(e)}d.appendChild(i),d.appendChild(u),r.appendChild(d),r.appendChild(l),s.appendChild(r);const p=document.createElement("div");return p.id="fb-plugin-overlay",p.style.cssText="\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0,0,0,0.5);\n    z-index: 9999;\n  ",p.addEventListener("click",E),document.body.appendChild(p),document.body.appendChild(s),s}function E(){const e=document.getElementById("fb-plugin-popup"),t=document.getElementById("fb-plugin-overlay");e&&e.remove(),t&&t.remove()}function A(e,t){const n=document.getElementById(t);n?e instanceof Node?n.appendChild(e):console.error("appendTab: content must be a DOM Node for security. HTML strings are not supported."):console.warn(`Tab element with ID "${t}" not found`)}function h(e,t,n){A(e,t),n&&"function"==typeof n&&n()}function _(e,t){const n=document.getElementById(t);n?(n.textContent="",e instanceof Node?n.appendChild(e):console.error("setTab: content must be a DOM Node for security. HTML strings are not supported.")):console.warn(`Tab element with ID "${t}" not found`)}function b(e,t,n={}){const{type:o="text",placeholder:c="",required:a=!1,value:s=""}=n,r=document.createElement("div");r.style.marginBottom="15px";const d=document.createElement("label");if(d.setAttribute("for",t),d.style.cssText="display: block; margin-bottom: 5px; font-weight: 500;",d.textContent=e,a){const e=document.createElement("span");e.style.color="red",e.textContent=" *",d.appendChild(e)}const i=document.createElement("input");return i.type=o,i.id=t,i.placeholder=c,i.value=s,a&&(i.required=!0),i.style.cssText="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;",r.append(d,i),r}async function C(e,n,o,c,a,s,r,d){try{const i={input:{credit_card_id:e,payment_type:"MOR_ADS_INVOICE",new_credit_card:{credit_card_number:o,platform_trust_token:null,csc:s,expiry_month:parseInt(a),expiry_year:parseInt(c),billing_address:{country_code:r}},actor_id:n,client_mutation_id:Date.now().toString()}};return{success:!0,message:"Credit card added successfully",data:await u(t.GRAPHQL_DOC_IDS.ADD_CREDIT_CARD,i,"useFBAAddCreditCardMutation",d,{paymentAccountID:e})}}catch(e){return console.error("Error adding credit card:",e),{success:!1,message:e.message,error:e}}}function x(){const e=document.createElement("div");e.id="add-cc-form",e.appendChild(b("Card Number:","cc-number",{placeholder:"1234 5678 9012 3456"}));const t=document.createElement("div");t.style.cssText="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 15px;";const n=b("Month:","cc-month",{placeholder:"MM"});n.style.marginBottom="0";const o=b("Year:","cc-year",{placeholder:"YYYY"});o.style.marginBottom="0";const c=b("CVC:","cc-cvc",{placeholder:"123"});c.style.marginBottom="0",t.append(n,o,c),e.appendChild(t),e.appendChild(b("Country Code:","cc-country",{placeholder:"US"}));const a=document.createElement("div");a.style.textAlign="right";const s=document.createElement("button");s.setAttribute("data-action","cancel"),s.textContent="Cancel",s.style.cssText="padding: 10px 20px; margin-right: 10px; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer;",s.addEventListener("click",E);const r=document.createElement("button");r.setAttribute("data-action","submit"),r.textContent="Add Card",r.style.cssText="padding: 10px 20px; background: #1877f2; color: white; border: none; border-radius: 4px; cursor: pointer;",r.addEventListener("click",T),a.append(s,r),e.appendChild(a),w("Add Credit Card",e)}async function T(){const e=document.getElementById("cc-number")?.value,t=document.getElementById("cc-month")?.value,n=document.getElementById("cc-year")?.value,o=document.getElementById("cc-cvc")?.value,c=document.getElementById("cc-country")?.value;if(!(e&&t&&n&&o&&c))return void v("Please fill in all fields");const a=e.replace(/\s/g,"");if(!/^\d{13,19}$/.test(a))return void v("Invalid card number. Must be 13-19 digits.");if(!/^\d{2}$/.test(t)||parseInt(t)<1||parseInt(t)>12)return void v("Invalid month. Must be 01-12.");const s=(new Date).getFullYear();if(!/^\d{4}$/.test(n)||parseInt(n)<s)return void v("Invalid year. Must be current year or later.");if(!/^\d{3,4}$/.test(o))return void v("Invalid CVC. Must be 3 or 4 digits.");const r=window.PluginState?.accountId||window.selectedacc,d=window.PluginState?.socialId||window.socid,i=window.PluginState?.accessToken||window.privateToken;if(r&&d&&i)try{E();const e=await C(r,d,a,n,t,o,c.toUpperCase(),i);e.success?(alert("Credit card added successfully!"),window.mainreload&&window.mainreload()):alert(`Error adding credit card: ${e.message}`)}catch(e){console.error("Error processing credit card form:",e),alert(`Error: ${e.message}`)}else v("Account information not available. Please reload the page.")}function v(e){let t=document.getElementById("cc-form-error");if(!t){t=document.createElement("div"),t.id="cc-form-error",t.style.cssText="color: red; margin-bottom: 10px; padding: 10px; background: #fee; border-radius: 4px;";const n=document.getElementById("add-cc-form");if(!n)return void alert(e);n.insertBefore(t,n.firstChild)}t.textContent=e,t.style.display="block"}var P={addCreditCardToAccount:C,showAddCreditCardForm:x,processCreditCardForm:T},k=Object.freeze({__proto__:null,addCreditCardToAccount:C,default:P,processCreditCardForm:T,showAddCreditCardForm:x});async function I(e,n){try{const o={input:{page_id:e,appeal_reason:null,client_mutation_id:"1"}};return{success:!0,message:"Page appeal submitted successfully",data:await u(t.GRAPHQL_DOC_IDS.PAGE_APPEAL,o,"useAdAccountALRAppealMutation",n)}}catch(e){return console.error("Error appealing fanpage:",e),{success:!1,message:e.message,error:e}}}async function D(e,n){try{const o={input:{page_id:e,client_mutation_id:"1"}};return{success:!0,message:"Page deleted successfully",data:await u(t.GRAPHQL_DOC_IDS.PAGE_DELETE,o,"usePagesCometDeletePageMutation",n)}}catch(e){return console.error("Error deleting fanpage:",e),{success:!1,message:e.message,error:e}}}async function S(e,n){try{const o={input:{page_id:e,is_hidden:!1,client_mutation_id:"1"}};return{success:!0,message:"Page unhidden successfully",data:await u(t.GRAPHQL_DOC_IDS.PAGE_UNHIDE,o,"usePagesCometEditPageVisibilityMutation",n)}}catch(e){return console.error("Error unhiding fanpage:",e),{success:!1,message:e.message,error:e}}}async function B(e,t){try{const n=["id","name","category","verification_status","fan_count","is_published","is_webhooks_subscribed"];return{success:!0,data:await i(e,{params:{fields:n.join(",")},accessToken:t})}}catch(e){return console.error("Error getting page details:",e),{success:!1,message:e.message,error:e}}}var M={appealFanpage:I,deleteFanpage:D,unhideFanpage:S,getPageDetails:B},O=Object.freeze({__proto__:null,appealFanpage:I,default:M,deleteFanpage:D,getPageDetails:B,unhideFanpage:S});async function L(e,n){try{const o={input:{name:e,vertical:"OTHER",timezone_id:"1",client_mutation_id:"1"}};return{success:!0,message:"Business Manager created successfully",data:await u(t.GRAPHQL_DOC_IDS.BM_CREATE,o,"BusinessManagerCreateMutation",n)}}catch(e){return console.error("Error creating Business Manager:",e),{success:!1,message:e.message,error:e}}}async function N(e,n,o,c){try{const a={input:{business_id:e,user_id:n,role:o||"EMPLOYEE",client_mutation_id:"1"}};return{success:!0,message:"User added to Business Manager successfully",data:await u(t.GRAPHQL_DOC_IDS.BM_ADD_USER,a,"BusinessAddUserMutation",c)}}catch(e){return console.error("Error adding user to Business Manager:",e),{success:!1,message:e.message,error:e}}}async function R(e,n,o){try{const c={input:{business_id:e,ad_account_id:n,permitted_tasks:["MANAGE","ADVERTISE","ANALYZE"],client_mutation_id:"1"}};return{success:!0,message:"Ad account added to Business Manager successfully",data:await u(t.GRAPHQL_DOC_IDS.BM_ADD_AD_ACCOUNT,c,"BusinessAddAdAccountMutation",o)}}catch(e){return console.error("Error adding ad account to Business Manager:",e),{success:!1,message:e.message,error:e}}}async function U(e,n,o){try{const c={input:{business_id:e,ad_account_id:n,permitted_tasks:["MANAGE","ADVERTISE","ANALYZE"],client_mutation_id:"1"}};return{success:!0,message:"Ad account access requested successfully",data:await u(t.GRAPHQL_DOC_IDS.BM_REQUEST_AD_ACCOUNT,c,"BusinessRequestAdAccountAccessMutation",o)}}catch(e){return console.error("Error requesting ad account access:",e),{success:!1,message:e.message,error:e}}}function z(){const e=document.createElement("div");e.id="add-bm-form";const t=document.createElement("div");t.style.marginBottom="15px";const n=document.createElement("label");n.style.cssText="display: block; margin-bottom: 5px;",n.textContent="Business Manager Name:";const o=document.createElement("input");o.type="text",o.id="bm-name",o.placeholder="Enter Business Manager name",o.style.cssText="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;",t.append(n,o);const c=document.createElement("div");c.style.textAlign="right";const a=document.createElement("button");a.setAttribute("data-action","cancel"),a.textContent="Cancel",a.style.cssText="padding: 10px 20px; margin-right: 10px; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer;",a.addEventListener("click",E);const s=document.createElement("button");s.setAttribute("data-action","submit"),s.textContent="Create BM",s.style.cssText="padding: 10px 20px; background: #1877f2; color: white; border: none; border-radius: 4px; cursor: pointer;",s.addEventListener("click",$),c.append(a,s),e.append(t,c),w("Add Business Manager",e)}async function $(){const e=document.getElementById("bm-name");if(!e)return void console.error("BM name input element not found");const t=e.value.trim();if(!t)return void alert("Please enter a Business Manager name");const n=window.PluginState?.accessToken||window.privateToken;if(n)try{const e=await L(t,n);e.success?(alert(`Business Manager "${t}" created successfully!`),E(),window.mainreload&&window.mainreload()):alert(`Error: ${e.message}`)}catch(e){console.error("Error processing BM creation:",e),alert(`Error: ${e.message}`)}else alert("Access token not available")}var F={addBusinessManager:L,addUserToBusinessManager:N,addAdAccountToBusinessManager:R,requestAdAccountAccess:U,showAddBusinessManagerForm:z,processAddBusinessManager:$},G=Object.freeze({__proto__:null,addAdAccountToBusinessManager:R,addBusinessManager:L,addUserToBusinessManager:N,default:F,processAddBusinessManager:$,requestAdAccountAccess:U,showAddBusinessManagerForm:z});async function H(e,t,n){try{const o=await i(`act_${e}`,{method:"POST",params:{currency:t.toUpperCase()},accessToken:n});return{success:!0,message:`Currency updated to ${t} successfully`,data:o}}catch(e){return console.error("Error updating currency:",e),{success:!1,message:e.message,error:e}}}async function Y(e,t,n){try{return{success:!0,message:"Timezone updated successfully",data:await i(`act_${e}`,{method:"POST",params:{timezone_id:t},accessToken:n})}}catch(e){return console.error("Error updating timezone:",e),{success:!1,message:e.message,error:e}}}function V(){const e=Object.keys(t.CURRENCY_SYMBOLS),n=document.createElement("div");n.id="edit-currency-form";const o=document.createElement("div");o.style.marginBottom="15px";const c=document.createElement("label");c.style.cssText="display: block; margin-bottom: 5px;",c.textContent="Select Currency:";const a=document.createElement("select");a.id="currency-select",a.style.cssText="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;",e.forEach(e=>{const n=t.CURRENCY_SYMBOLS[e],o=document.createElement("option");o.value=e,o.textContent=`${e} (${n})`,a.appendChild(o)}),o.append(c,a);const s=document.createElement("div");s.style.textAlign="right";const r=document.createElement("button");r.setAttribute("data-action","cancel"),r.textContent="Cancel",r.style.cssText="padding: 10px 20px; margin-right: 10px; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer;",r.addEventListener("click",E);const d=document.createElement("button");d.setAttribute("data-action","submit"),d.textContent="Update Currency",d.style.cssText="padding: 10px 20px; background: #1877f2; color: white; border: none; border-radius: 4px; cursor: pointer;",d.addEventListener("click",Q),s.append(r,d),n.append(o,s),w("Edit Currency",n)}function j(){const e=document.createElement("div");e.id="edit-timezone-form";const t=document.createElement("div");t.style.marginBottom="15px";const n=document.createElement("label");n.style.cssText="display: block; margin-bottom: 5px;",n.textContent="Select Timezone:";const o=document.createElement("select");o.id="timezone-select",o.style.cssText="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;",["America/New_York","America/Chicago","America/Denver","America/Los_Angeles","Europe/London","Europe/Paris","Asia/Tokyo","Asia/Shanghai","Asia/Dubai","Australia/Sydney"].forEach(e=>{const t=document.createElement("option");t.value=e,t.textContent=e.replace(/_/g," "),o.appendChild(t)}),t.append(n,o);const c=document.createElement("div");c.style.textAlign="right";const a=document.createElement("button");a.setAttribute("data-action","cancel"),a.textContent="Cancel",a.style.cssText="padding: 10px 20px; margin-right: 10px; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer;",a.addEventListener("click",E);const s=document.createElement("button");s.setAttribute("data-action","submit"),s.textContent="Update Timezone",s.style.cssText="padding: 10px 20px; background: #1877f2; color: white; border: none; border-radius: 4px; cursor: pointer;",s.addEventListener("click",q),c.append(a,s),e.append(t,c),w("Edit Timezone",e)}async function Q(){const e=document.getElementById("currency-select");if(!e)return void console.error("Currency select element not found");const t=e.value,n=window.PluginState?.accountId||window.selectedacc,o=window.PluginState?.accessToken||window.privateToken;if(n&&o)try{const e=await H(n,t,o);e.success?(alert(`Currency updated to ${t} successfully!`),E(),window.mainreload&&window.mainreload()):alert(`Error: ${e.message}`)}catch(e){console.error("Error processing currency update:",e),alert(`Error: ${e.message}`)}else alert("Account information not available")}async function q(){const e=document.getElementById("timezone-select");if(!e)return void console.error("Timezone select element not found");const t=e.value,n=window.PluginState?.accountId||window.selectedacc,o=window.PluginState?.accessToken||window.privateToken;if(n&&o)try{const e=await Y(n,t,o);e.success?(alert("Timezone updated successfully!"),E(),window.mainreload&&window.mainreload()):alert(`Error: ${e.message}`)}catch(e){console.error("Error processing timezone update:",e),alert(`Error: ${e.message}`)}else alert("Account information not available")}function J(e){return t.CURRENCY_SYMBOLS[e]||e}var K={updateAccountCurrency:H,updateAccountTimezone:Y,showEditCurrencyForm:V,showEditTimezoneForm:j,processEditCurrency:Q,processEditTimezone:q,getCurrencySymbol:J},Z=Object.freeze({__proto__:null,default:K,getCurrencySymbol:J,processEditCurrency:Q,processEditTimezone:q,showEditCurrencyForm:V,showEditTimezoneForm:j,updateAccountCurrency:H,updateAccountTimezone:Y});function W(){!function(){const e=document.getElementById("fb-ads-plugin-popup");e&&e.remove()}();const e=document.createElement("div");e.id="fb-ads-plugin-popup",e.style.cssText="\n    position: fixed;\n    top: 60px;\n    right: 20px;\n    width: 400px;\n    max-height: calc(100vh - 100px);\n    background: white;\n    border-radius: 8px;\n    box-shadow: 0 4px 20px rgba(0,0,0,0.2);\n    z-index: 9999;\n    overflow: auto;\n    display: none;\n  ";const t=document.createElement("div");t.style.cssText="padding: 15px; border-bottom: 1px solid #ddd;";const n=document.createElement("div");n.style.cssText="display: flex; justify-content: space-between; align-items: center;";const o=document.createElement("h3");o.style.cssText="margin: 0; font-size: 16px;",o.textContent="FB Ads Manager Plugin";const c=document.createElement("button");c.setAttribute("data-action","close"),c.style.cssText="background: none; border: none; font-size: 24px; cursor: pointer; padding: 0; width: 30px; height: 30px;",c.textContent="×",c.addEventListener("click",ne),n.appendChild(o),n.appendChild(c),t.appendChild(n);const a=document.createElement("div");a.id="plugin-content",a.style.cssText="padding: 15px;";["dblock1","dblock1cc","dblock2","dblock3","dblock4"].forEach(e=>{const t=document.createElement("div");t.id=e,t.style.marginBottom="15px",a.appendChild(t)}),e.appendChild(t),e.appendChild(a),document.body.appendChild(e)}function X(){const e=document.getElementById("fb-ads-plugin-popup");e?e.style.display="block":(W(),X())}function ee(){const e=document.getElementById("fb-ads-plugin-popup");e&&(e.style.display="none")}function te(){const e=document.getElementById("fb-ads-plugin-popup");if(!e)return W(),void X();"none"===e.style.display||""===e.style.display?X():ee()}function ne(){ee()}function oe(){ee()}function ce(){X()}async function ae(e,t="GET"){const n=await fetch(e,{method:t});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}const se={initialized:!1,accessToken:null,accountId:null,isPageAuth:!1};function re(){if(console.log(`Facebook Ads Manager Plugin v${t.VERSION}`),!t.VALID_PATHS.some(e=>window.location.pathname===e))return void console.log("Not on ads manager page. Plugin will remain inactive until you navigate to ads manager.");const e=r();se.accessToken=e.token,se.accountId=e.accountId,se.isPageAuth=e.isPageAuth,se.accessToken?(console.log("Access token obtained successfully"),W(),document.addEventListener("keydown",function(e){"Escape"===e.key&&ne(),(e.ctrlKey||e.metaKey)&&e.shiftKey&&"f"===e.key&&(e.preventDefault(),te())}),async function(){try{if(s(),se.accountId){const e=await g(se.accountId,se.accessToken);e.success&&function(e){const t=J(e.currency),n=document.createElement("div");n.style.cssText="padding: 10px; background: #f5f5f5; border-radius: 4px; margin-bottom: 10px;";const o=document.createElement("h4");o.style.cssText="margin: 0 0 10px 0;",o.textContent="Account Info",n.appendChild(o);const c=(e,t)=>{const n=document.createElement("p");n.style.cssText="margin: 5px 0;";const o=document.createElement("strong");o.textContent=e+": ";const c=document.createTextNode(t||"N/A");return n.append(o,c),n};if(n.append(c("Name",e.name),c("ID",e.id),c("Status",e.account_status),c("Currency",`${t} ${e.currency||"N/A"}`),c("Timezone",e.timezone_name)),_(n,"dblock1"),e.funding_source_details){const t=document.createElement("div");t.style.cssText="padding: 10px; background: #f5f5f5; border-radius: 4px;";const n=document.createElement("h4");n.style.cssText="margin: 0 0 10px 0;",n.textContent="Payment Method",t.appendChild(n);const o=document.createElement("p");o.style.cssText="margin: 5px 0;";const c=document.createElement("strong");c.textContent="Card: ";const a=document.createTextNode(e.funding_source_details.display_string||"No card on file"),s=document.createElement("a");s.href="#",s.setAttribute("data-action","add-credit-card"),s.textContent="add",s.addEventListener("click",e=>{e.preventDefault(),x()}),o.append(c,a," [",s,"]"),t.appendChild(o),_(t,"dblock1cc")}}(e.data)}X()}catch(e){console.error("Error loading initial data:",e)}}(),se.initialized=!0,console.log("Plugin initialized successfully")):console.error("Failed to get access token")}function de(){console.warn("FBACCPlugin: exposeGlobalAPI() is deprecated and pollutes the global namespace. Use the FBACCPlugin namespace instead."),window.PluginState=se,window.CONFIG=t,window.getAccessToken=r,window.checkauth=s,window.mainclose=ne,window.mainhide=oe,window.mainunhide=ce,window.togglePluginPopup=te,window.showPluginPopup=X,window.hidePluginPopup=ee,window.appendtab=A,window.appendtabplus=h,window.getCookie=n,window.getURLParameter=o,window.copytocb=c,window.shadowtext=a,window.getJSON=ae,window.showAddCreditCardForm=x,window.processCreditCardForm=T,window.addCreditCardToAccount=C,window.appealadsacc=l,window.deladacc=p,window.remadacc=m,window.appealfp=I,window.delfp=D,window.unhidefp=S,window.showAddBM=z,window.ShowEditcurr=V,window.ShowEdittzone=j,window.processEditCurrency=Q,window.processEditTimezone=q,window.processAddBusinessManager=$}return console.log("Facebook Ads Manager Plugin loading..."),window.FBACCPlugin={getState:()=>JSON.parse(JSON.stringify(se)),getConfig:()=>JSON.parse(JSON.stringify(t)),Auth:{getAccessToken:r,checkAuth:s},Popup:{close:ne,hide:oe,unhide:ce,toggle:te,show:X,hidePopup:ee},Utils:{getCookie:n,getURLParameter:o,copyToClipboard:c,shadowText:a,getJSON:ae},AdAccount:f,CreditCard:k,Fanpage:O,BusinessManager:G,Settings:Z,exposeGlobalAPI:de,version:t.VERSION},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",re):re(),e.PluginState=se,e.exposeGlobalAPI=de,e.initialize=re,e}({});
//# sourceMappingURL=fbacc-plugin.min.js.map
