{"version":3,"file":"fbacc-plugin.min.js","sources":["../src/core/config.js","../src/utils/helpers.js","../src/core/auth.js","../src/core/api.js","../src/modules/adAccount.js","../src/utils/dom.js","../src/ui/tabs.js","../src/modules/creditCard.js","../src/modules/fanpage.js","../src/modules/businessManager.js","../src/modules/settings.js","../src/ui/popup.js","../src/utils/http.js","../src/main.js"],"sourcesContent":["/**\n * Configuration and Constants\n * Global configuration for Facebook Ads Manager Plugin\n */\n\nexport const CONFIG = {\n  VERSION: '6.4',\n\n  // Facebook Graph API version\n  FB_API_VERSION: 'v18.0',\n\n  // Valid paths for the plugin to activate\n  VALID_PATHS: [\n    '/adsmanager/manage/campaigns',\n    '/ads/creativehub/home/',\n    '/adsmanager/manage/all',\n    '/adsmanager/manage/ads',\n    '/adsmanager/manage/adsets'\n  ],\n\n  // Facebook GraphQL Document IDs\n  // Note: These may change when Facebook updates their API\n  GRAPHQL_DOC_IDS: {\n    // Ad Account Operations\n    AD_ACCOUNT_APPEAL: '5197966936890203',\n    AD_ACCOUNT_DELETE: '4787981637941330',\n    AD_ACCOUNT_REMOVE_ACCESS: '5123456789012345',\n\n    // Fanpage Operations\n    PAGE_APPEAL: '5197966936890203',\n    PAGE_DELETE: '4899485650107392',\n    PAGE_UNHIDE: '4920939114687785',\n\n    // Business Manager Operations\n    BM_CREATE: '4787981637941333',\n    BM_ADD_USER: '4787981637941334',\n    BM_ADD_AD_ACCOUNT: '4787981637941335',\n    BM_REQUEST_AD_ACCOUNT: '4787981637941336',\n\n    // Credit Card Operations\n    ADD_CREDIT_CARD: '4896364773778784'\n  },\n\n  // Cookie names\n  COOKIES: {\n    USER_ID: 'i_user'\n  },\n\n  // Currency symbols mapping\n  CURRENCY_SYMBOLS: {\n    'USD': '$',    // US Dollar\n    'EUR': '€',    // Euro\n    'CRC': '₡',    // Costa Rican Colón\n    'GBP': '£',    // British Pound Sterling\n    'ILS': '₪',    // Israeli New Sheqel\n    'INR': '₹',    // Indian Rupee\n    'JPY': '¥',    // Japanese Yen\n    'KRW': '₩',    // South Korean Won\n    'NGN': '₦',    // Nigerian Naira\n    'PHP': '₱',    // Philippine Peso\n    'PLN': 'zł',   // Polish Zloty\n    'PYG': '₲',    // Paraguayan Guarani\n    'THB': '฿',    // Thai Baht\n    'UAH': '₴',    // Ukrainian Hryvnia\n    'VND': '₫'     // Vietnamese Dong\n  }\n};\n\nexport default CONFIG;\n","/**\n * Utility Helper Functions\n * Common helper functions used throughout the application\n */\n\n/**\n * Get cookie value by name\n * @param {string} name - Cookie name\n * @returns {string|undefined} Cookie value or undefined if not found\n */\nexport function getCookie(name) {\n  const value = `; ${document.cookie}`;\n  const parts = value.split(`; ${name}=`);\n  if (parts.length === 2) {\n    return parts.pop().split(';').shift();\n  }\n  return undefined;\n}\n\n/**\n * Get URL parameter value\n * @param {string} name - Parameter name\n * @returns {string|null} Parameter value or null if not found\n */\nexport function getURLParameter(name) {\n  const urlParams = new URLSearchParams(window.location.search);\n  return urlParams.get(name);\n}\n\n/**\n * Copy text to clipboard using modern Clipboard API with fallback\n * @param {string} text - Text to copy\n * @returns {Promise<void>}\n */\nexport async function copyToClipboard(text) {\n  // Try modern Clipboard API first\n  if (navigator.clipboard && navigator.clipboard.writeText) {\n    try {\n      await navigator.clipboard.writeText(text);\n      return;\n    } catch (err) {\n      console.warn('Clipboard API failed, falling back to execCommand:', err);\n    }\n  }\n\n  // Fallback to deprecated execCommand for older browsers\n  try {\n    const textarea = document.createElement('textarea');\n    textarea.value = text;\n    textarea.style.position = 'fixed';\n    textarea.style.opacity = '0';\n    textarea.style.top = '0';\n    textarea.style.left = '0';\n    document.body.appendChild(textarea);\n    textarea.focus();\n    textarea.select();\n\n    const successful = document.execCommand('copy');\n    document.body.removeChild(textarea);\n\n    if (!successful) {\n      throw new Error('execCommand copy failed');\n    }\n  } catch (err) {\n    console.error('Failed to copy text to clipboard:', err);\n    throw new Error('Could not copy to clipboard');\n  }\n}\n\n/**\n * Shadow text for display (partially hide sensitive information)\n * @param {string} text - Text to shadow\n * @param {number} visibleChars - Number of characters to keep visible\n * @returns {string} Shadowed text\n */\nexport function shadowText(text, visibleChars = 4) {\n  if (!text || text.length <= visibleChars) return text;\n  const visible = text.substring(0, visibleChars);\n  const hidden = '*'.repeat(text.length - visibleChars);\n  return visible + hidden;\n}\n\nexport default {\n  getCookie,\n  getURLParameter,\n  copyToClipboard,\n  shadowText\n};\n","/**\n * Authentication and Token Management\n * Handles Facebook access token extraction and authentication\n */\n\nimport { getCookie, getURLParameter } from '../utils/helpers.js';\nimport { CONFIG } from './config.js';\n\n/**\n * Check if user is authenticated as page or personal profile\n * @returns {boolean} True if page auth, false if personal profile\n */\nexport function checkAuth() {\n  if (getCookie(CONFIG.COOKIES.USER_ID) !== undefined) {\n    return true; // Page authentication\n  }\n  return false; // Personal profile\n}\n\n/**\n * Get Facebook access token from page scripts\n * @returns {Object} Token information { token, accountId, isPageAuth }\n */\nexport function getAccessToken() {\n  const isPageAuth = checkAuth();\n  console.log('Is page auth?', isPageAuth);\n  console.log('Looking for access token...');\n\n  const scripts = document.getElementsByTagName('script');\n  let token = '';\n  let accountId = '';\n\n  // Get selected account from URL parameter\n  const selectedAccount = getURLParameter('act');\n  const elementIdRegEx = /selected_account_id:\"(.*?)\"/i;\n  const tokenRegex = /\"(EA[A-Za-z0-9]{20,})\"/;\n\n  for (let i = 0; i < scripts.length; i++) {\n    const html = scripts[i].innerHTML;\n\n    // Extract access token using capturing group\n    if (!token) {\n      const tokenMatch = tokenRegex.exec(html);\n      if (tokenMatch && tokenMatch[1]) {\n        token = tokenMatch[1];\n        console.log('Access token found');\n      }\n    }\n\n    // Extract account ID using capturing group\n    if (!selectedAccount && !accountId) {\n      const accountIdMatch = elementIdRegEx.exec(html);\n      if (accountIdMatch && accountIdMatch[1]) {\n        accountId = accountIdMatch[1];\n        console.log('Account ID found:', accountId);\n      }\n    }\n  }\n\n  // Use selected account from URL if available\n  if (selectedAccount) {\n    accountId = selectedAccount.replace('act=', '');\n  }\n\n  return {\n    token,\n    accountId,\n    isPageAuth\n  };\n}\n\n/**\n * Validate access token\n * @param {string} token - Access token to validate\n * @returns {boolean} True if token is valid format\n */\nexport function validateToken(token) {\n  if (!token) return false;\n\n  // Facebook tokens typically start with EA and are at least 20 characters\n  const tokenPattern = /^EA[A-Za-z0-9]{20,}$/;\n  return tokenPattern.test(token);\n}\n\n/**\n * Prompt user to switch to personal profile if needed\n * @param {Function} callback - Callback to execute after switch\n */\nexport function promptAccountSwitch(callback) {\n  const isPageAuth = checkAuth();\n\n  if (isPageAuth) {\n    const message = 'You need to switch to personal profile to continue!';\n    const switchUrl = 'https://www.facebook.com/forced_account_switch';\n\n    const shouldSwitch = confirm(`${message}\\n\\nClick OK to open account switcher.`);\n\n    if (shouldSwitch) {\n      window.open(switchUrl, 'popUpWindow', 'height=500,width=900');\n    }\n\n    return false;\n  }\n\n  if (callback) callback();\n  return true;\n}\n\nexport default {\n  checkAuth,\n  getAccessToken,\n  validateToken,\n  promptAccountSwitch\n};\n","/**\n * API Core Module\n * Central API management and request handling\n */\n\nimport { CONFIG } from './config.js';\n\n/**\n * Facebook Graph API base URL\n */\nexport const FB_GRAPH_API_BASE = `https://graph.facebook.com/${CONFIG.FB_API_VERSION}`;\n\n/**\n * Facebook GraphQL API URL\n */\nexport const FB_GRAPHQL_API = 'https://www.facebook.com/api/graphql/';\n\n/**\n * Make a Facebook Graph API request\n * @param {string} endpoint - API endpoint (e.g., 'me', 'act_123456/campaigns')\n * @param {Object} options - Request options\n * @returns {Promise<Object>} API response\n */\nexport async function graphAPIRequest(endpoint, options = {}) {\n  const {\n    method = 'GET',\n    params = {},\n    accessToken = null\n  } = options;\n\n  if (!accessToken) {\n    throw new Error('Access token is required. Please pass it explicitly.');\n  }\n\n  const token = accessToken;\n\n  // For POST/PUT/PATCH requests, send parameters in body; for GET, use query string\n  let url;\n  let fetchOptions = { method };\n\n  const bodyMethods = ['POST', 'PUT', 'PATCH'];\n\n  if (bodyMethods.includes(method)) {\n    // Access token in query, other params in body\n    const queryParams = new URLSearchParams({ access_token: token });\n    url = `${FB_GRAPH_API_BASE}/${endpoint}?${queryParams}`;\n\n    // Send other parameters in the request body\n    const bodyParams = new URLSearchParams(params);\n    fetchOptions.headers = {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    };\n    fetchOptions.body = bodyParams;\n  } else {\n    // GET request - all params in query string\n    // Place params first, then access_token to ensure token takes precedence\n    const queryParams = new URLSearchParams({\n      ...params,\n      access_token: token\n    });\n    url = `${FB_GRAPH_API_BASE}/${endpoint}?${queryParams}`;\n  }\n\n  const response = await fetch(url, fetchOptions);\n\n  if (!response.ok) {\n    let errorData;\n    try {\n      errorData = await response.json();\n    } catch (jsonError) {\n      console.error('Failed to parse API error response as JSON:', jsonError);\n      throw new Error(`API request failed with status ${response.status}: ${response.statusText}`);\n    }\n    // Log full error details for debugging\n    console.error('Facebook API Error Details:', {\n      status: response.status,\n      statusText: response.statusText,\n      error: errorData.error,\n      endpoint: endpoint\n    });\n    // Throw error with detailed message\n    const errorMessage = errorData.error?.message || 'API request failed';\n    const errorCode = errorData.error?.code || 'UNKNOWN';\n    const errorType = errorData.error?.type || 'Unknown';\n    throw new Error(`${errorMessage} (Code: ${errorCode}, Type: ${errorType})`);\n  }\n\n  return await response.json();\n}\n\n/**\n * Make a Facebook GraphQL request\n * @param {string} docId - GraphQL document ID\n * @param {Object} variables - GraphQL variables\n * @param {string} friendlyName - API friendly name\n * @param {string} accessToken - Access token (optional)\n * @param {Object} extraParams - Optional additional parameters for the request body\n * @returns {Promise<Object>} API response\n */\nexport async function graphQLRequest(docId, variables, friendlyName, accessToken = null, extraParams = {}) {\n  if (!accessToken) {\n    throw new Error('Access token is required. Please pass it explicitly.');\n  }\n\n  const token = accessToken;\n\n  const urlencoded = new URLSearchParams();\n  urlencoded.append('access_token', token);\n\n  // Add any extra parameters first (e.g., paymentAccountID)\n  for (const [key, value] of Object.entries(extraParams)) {\n    urlencoded.append(key, value);\n  }\n\n  urlencoded.append('doc_id', docId);\n  urlencoded.append('variables', JSON.stringify(variables));\n  urlencoded.append('fb_api_req_friendly_name', friendlyName);\n  urlencoded.append('fb_api_caller_class', 'RelayModern');\n\n  const response = await fetch(FB_GRAPHQL_API, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    },\n    body: urlencoded\n  });\n\n  if (!response.ok) {\n    throw new Error(`HTTP error! status: ${response.status}`);\n  }\n\n  const result = await response.json();\n\n  if (result.errors && result.errors.length > 0) {\n    throw new Error(result.errors[0].message);\n  }\n\n  return result;\n}\n\n/**\n * Batch multiple Graph API requests\n * @param {Array<Object>} requests - Array of request objects\n * @param {string} accessToken - Access token (optional)\n * @returns {Promise<Array>} Array of responses\n */\nexport async function batchGraphAPIRequests(requests, accessToken = null) {\n  if (!accessToken) {\n    throw new Error('Access token is required. Please pass it explicitly.');\n  }\n\n  const token = accessToken;\n\n  const batch = requests.map(req => ({\n    method: req.method || 'GET',\n    relative_url: req.endpoint + (req.params ? `?${new URLSearchParams(req.params)}` : '')\n  }));\n\n  const params = new URLSearchParams({\n    access_token: token,\n    batch: JSON.stringify(batch)\n  });\n\n  const url = `${FB_GRAPH_API_BASE}?${params}`;\n\n  const response = await fetch(url, { method: 'POST' });\n\n  if (!response.ok) {\n    throw new Error('Batch request failed');\n  }\n\n  const results = await response.json();\n\n  return results.map(result => {\n    if (result.code !== 200) {\n      return {\n        success: false,\n        error: JSON.parse(result.body)\n      };\n    }\n    return {\n      success: true,\n      data: JSON.parse(result.body)\n    };\n  });\n}\n\n/**\n * Handle API errors\n * @param {Error} error - Error object\n * @returns {Object} Formatted error response\n */\nexport function handleAPIError(error) {\n  console.error('API Error:', error);\n\n  let message = error.message || 'Unknown error occurred';\n  let code = 'UNKNOWN_ERROR';\n\n  // Parse Facebook API errors\n  if (error.message) {\n    if (error.message.includes('access token')) {\n      code = 'INVALID_TOKEN';\n      message = 'Invalid or expired access token';\n    } else if (error.message.includes('permission')) {\n      code = 'PERMISSION_DENIED';\n      message = 'Permission denied';\n    } else if (error.message.includes('rate limit')) {\n      code = 'RATE_LIMIT';\n      message = 'Rate limit exceeded';\n    }\n  }\n\n  return {\n    success: false,\n    error: {\n      code,\n      message\n    }\n  };\n}\n\nexport default {\n  FB_GRAPH_API_BASE,\n  FB_GRAPHQL_API,\n  graphAPIRequest,\n  graphQLRequest,\n  batchGraphAPIRequests,\n  handleAPIError\n};\n","/**\n * Ad Account Management Module\n * Handles operations related to Facebook ad accounts\n */\n\nimport { graphAPIRequest, graphQLRequest } from '../core/api.js';\nimport { CONFIG } from '../core/config.js';\n\n/**\n * Basic ad account fields that should be available to most access tokens\n */\nconst BASIC_AD_ACCOUNT_FIELDS = [\n  'id',\n  'name',\n  'account_status',\n  'disable_reason',\n  'currency',\n  'timezone_name'\n];\n\n/**\n * Sensitive ad account fields that require ads_management or business_management permissions\n */\nconst SENSITIVE_AD_ACCOUNT_FIELDS = [\n  'amount_spent',\n  'balance',\n  'funding_source_details'\n];\n\n/**\n * Appeal/request review for ad account\n * @param {string} accountId - Ad account ID\n * @param {string} accessToken - Facebook access token\n * @returns {Promise<Object>} Result of the appeal\n */\nexport async function appealAdAccount(accountId, accessToken) {\n  try {\n    const variables = {\n      input: {\n        client_mutation_id: '1',\n        actor_id: accountId,\n        ad_account_id: accountId,\n        ids_issue_ent_id: '1',\n        appeal_comment: \"I'm not sure which policy was violated.\",\n        callsite: 'ACCOUNT_QUALITY'\n      }\n    };\n\n    const response = await graphQLRequest(\n      CONFIG.GRAPHQL_DOC_IDS.AD_ACCOUNT_APPEAL,\n      variables,\n      'useAdAccountALRAppealMutation',\n      accessToken\n    );\n\n    return {\n      success: true,\n      message: 'Ad account appeal submitted successfully',\n      data: response\n    };\n\n  } catch (error) {\n    console.error('Error appealing ad account:', error);\n    return {\n      success: false,\n      message: error.message,\n      error\n    };\n  }\n}\n\n/**\n * Delete ad account\n * @param {string} adAccountId - Ad account ID to delete\n * @param {string} accessToken - Facebook access token\n * @returns {Promise<Object>} Result of deletion\n */\nexport async function deleteAdAccount(adAccountId, accessToken) {\n  try {\n    const variables = {\n      input: {\n        ad_account_id: adAccountId,\n        actor_id: adAccountId,\n        client_mutation_id: '1'\n      }\n    };\n\n    const response = await graphQLRequest(\n      CONFIG.GRAPHQL_DOC_IDS.AD_ACCOUNT_DELETE,\n      variables,\n      'AdAccountDeleteMutation',\n      accessToken\n    );\n\n    return {\n      success: true,\n      message: 'Ad account deleted successfully',\n      data: response\n    };\n\n  } catch (error) {\n    console.error('Error deleting ad account:', error);\n    return {\n      success: false,\n      message: error.message,\n      error\n    };\n  }\n}\n\n/**\n * Remove ad account from user\n * @param {string} adAccountId - Ad account ID\n * @param {string} userId - User ID to remove\n * @param {string} accessToken - Facebook access token\n * @returns {Promise<Object>} Result of removal\n */\nexport async function removeAdAccountAccess(adAccountId, userId, accessToken) {\n  try {\n    const variables = {\n      input: {\n        account_id: adAccountId,\n        user_id: userId,\n        client_mutation_id: '1'\n      }\n    };\n\n    const response = await graphQLRequest(\n      CONFIG.GRAPHQL_DOC_IDS.AD_ACCOUNT_REMOVE_ACCESS,\n      variables,\n      'RemoveAdAccountAccessMutation',\n      accessToken\n    );\n\n    return {\n      success: true,\n      message: 'Ad account access removed successfully',\n      data: response\n    };\n\n  } catch (error) {\n    console.error('Error removing ad account access:', error);\n    return {\n      success: false,\n      message: error.message,\n      error\n    };\n  }\n}\n\n/**\n * Get ad account details\n * @param {string} accountId - Ad account ID\n * @param {string} accessToken - Facebook access token\n * @returns {Promise<Object>} Account details\n */\nexport async function getAdAccountDetails(accountId, accessToken) {\n  try {\n    // Combine all fields into a single request as in the original implementation\n    // The API v18.0 works better with all fields requested together\n    const allFields = [\n      ...BASIC_AD_ACCOUNT_FIELDS,\n      ...SENSITIVE_AD_ACCOUNT_FIELDS\n    ];\n\n    const data = await graphAPIRequest(`act_${accountId}`, {\n      params: {\n        fields: allFields.join(',')\n      },\n      accessToken\n    });\n\n    return {\n      success: true,\n      data\n    };\n\n  } catch (error) {\n    console.error('Error getting ad account details:', error);\n    return {\n      success: false,\n      message: error.message,\n      error\n    };\n  }\n}\n\nexport default {\n  appealAdAccount,\n  deleteAdAccount,\n  removeAdAccountAccess,\n  getAdAccountDetails\n};\n","/**\n * DOM Manipulation Utilities\n * Helper functions for DOM operations\n */\n\n/**\n * Create and show a modal/popup\n * @param {string} title - Popup title (will be safely escaped)\n * @param {HTMLElement|Node} content - DOM element or node for popup content\n * @param {Object} options - Popup options\n * @returns {HTMLElement} The popup element for direct event listener attachment\n *\n * SECURITY: This function only accepts DOM elements/nodes for content to prevent XSS attacks.\n * Build your content using createElement() and DOM methods, not HTML strings.\n */\nexport function showPopup(title, content, options = {}) {\n  const {\n    width = '600px',\n    height = 'auto',\n    className = 'fb-plugin-popup'\n  } = options;\n\n  // Remove existing popup if any\n  hidePopup();\n\n  // Create popup container\n  const popup = document.createElement('div');\n  popup.id = 'fb-plugin-popup';\n  popup.className = className;\n  popup.style.cssText = `\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: ${width};\n    max-height: 80vh;\n    background: white;\n    border-radius: 8px;\n    box-shadow: 0 4px 20px rgba(0,0,0,0.3);\n    z-index: 10000;\n    overflow: auto;\n  `;\n\n  // Create main container\n  const mainContainer = document.createElement('div');\n  mainContainer.style.padding = '20px';\n\n  // Create header container\n  const headerContainer = document.createElement('div');\n  headerContainer.style.cssText = 'display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;';\n\n  // Create title element (use textContent for XSS protection)\n  const titleElement = document.createElement('h3');\n  titleElement.style.margin = '0';\n  titleElement.textContent = title; // Safe: uses textContent instead of innerHTML\n\n  // Create close button\n  const closeButton = document.createElement('button');\n  closeButton.setAttribute('data-action', 'close-popup');\n  closeButton.style.cssText = 'background: none; border: none; font-size: 24px; cursor: pointer;';\n  closeButton.textContent = '×';\n  closeButton.addEventListener('click', hidePopup);\n\n  // Create content container\n  const contentContainer = document.createElement('div');\n  // Only accept DOM nodes for security\n  if (content instanceof Node) {\n    contentContainer.appendChild(content);\n  } else {\n    console.error('showPopup: content must be a DOM Node for security. HTML strings are not supported.');\n    const errorMsg = document.createElement('p');\n    errorMsg.textContent = 'Error: Invalid content provided';\n    errorMsg.style.color = 'red';\n    contentContainer.appendChild(errorMsg);\n  }\n\n  // Assemble the popup\n  headerContainer.appendChild(titleElement);\n  headerContainer.appendChild(closeButton);\n  mainContainer.appendChild(headerContainer);\n  mainContainer.appendChild(contentContainer);\n  popup.appendChild(mainContainer);\n\n  // Create overlay\n  const overlay = document.createElement('div');\n  overlay.id = 'fb-plugin-overlay';\n  overlay.style.cssText = `\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0,0,0,0.5);\n    z-index: 9999;\n  `;\n  overlay.addEventListener('click', hidePopup);\n\n  document.body.appendChild(overlay);\n  document.body.appendChild(popup);\n\n  return popup;\n}\n\n/**\n * Hide/close the popup\n */\nexport function hidePopup() {\n  const popup = document.getElementById('fb-plugin-popup');\n  const overlay = document.getElementById('fb-plugin-overlay');\n\n  if (popup) popup.remove();\n  if (overlay) overlay.remove();\n}\n\n/**\n * Toggle popup visibility\n */\nexport function togglePopup() {\n  const popup = document.getElementById('fb-plugin-popup');\n  if (popup) {\n    hidePopup();\n  }\n}\n\nexport default {\n  showPopup,\n  hidePopup,\n  togglePopup\n};\n","/**\n * Tabs UI Component\n * Manages content tabs within the plugin popup\n */\n\n/**\n * Append content to a tab\n * @param {HTMLElement|Node} content - DOM element or node to append\n * @param {string} tabId - Tab element ID\n *\n * SECURITY: This function only accepts DOM elements/nodes to prevent XSS attacks.\n * Do not pass HTML strings. Use createElement() to build your content safely.\n */\nexport function appendTab(content, tabId) {\n  const element = document.getElementById(tabId);\n  if (!element) {\n    console.warn(`Tab element with ID \"${tabId}\" not found`);\n    return;\n  }\n\n  if (content instanceof Node) {\n    element.appendChild(content);\n  } else {\n    console.error('appendTab: content must be a DOM Node for security. HTML strings are not supported.');\n  }\n}\n\n/**\n * Append content to tab with callback\n * @param {HTMLElement|Node} content - DOM element or node to append\n * @param {string} tabId - Tab element ID\n * @param {Function} callback - Callback after appending\n *\n * SECURITY: This function only accepts DOM elements/nodes to prevent XSS attacks.\n */\nexport function appendTabPlus(content, tabId, callback) {\n  appendTab(content, tabId);\n  if (callback && typeof callback === 'function') {\n    callback();\n  }\n}\n\n/**\n * Clear tab content\n * @param {string} tabId - Tab element ID\n */\nexport function clearTab(tabId) {\n  const element = document.getElementById(tabId);\n  if (element) {\n    // Safe: clearing content, no XSS risk\n    element.textContent = '';\n  }\n}\n\n/**\n * Set tab content (replace existing content)\n * @param {HTMLElement|Node} content - DOM element or node to set\n * @param {string} tabId - Tab element ID\n *\n * SECURITY: This function only accepts DOM elements/nodes to prevent XSS attacks.\n * Do not pass HTML strings. Use createElement() to build your content safely.\n */\nexport function setTab(content, tabId) {\n  const element = document.getElementById(tabId);\n  if (!element) {\n    console.warn(`Tab element with ID \"${tabId}\" not found`);\n    return;\n  }\n\n  // Clear existing content safely\n  element.textContent = '';\n\n  if (content instanceof Node) {\n    element.appendChild(content);\n  } else {\n    console.error('setTab: content must be a DOM Node for security. HTML strings are not supported.');\n  }\n}\n\n/**\n * Create a button element\n * @param {string} text - Button text (will be escaped)\n * @param {string} dataAction - Data attribute value for event delegation\n * @param {Object} options - Button options\n * @returns {HTMLButtonElement} Button DOM element\n *\n * SECURITY: Returns a DOM element with safe textContent. Use data-action for event delegation.\n */\nexport function createButton(text, dataAction, options = {}) {\n  const {\n    style = 'primary',\n    size = 'medium',\n    className = ''\n  } = options;\n\n  const styles = {\n    primary: 'background: #1877f2; color: white; border: none;',\n    secondary: 'background: white; color: #1877f2; border: 1px solid #1877f2;',\n    danger: 'background: #dc3545; color: white; border: none;',\n    success: 'background: #28a745; color: white; border: none;'\n  };\n\n  const sizes = {\n    small: 'padding: 5px 10px; font-size: 12px;',\n    medium: 'padding: 8px 16px; font-size: 14px;',\n    large: 'padding: 12px 24px; font-size: 16px;'\n  };\n\n  const baseStyle = 'border-radius: 4px; cursor: pointer; font-weight: 500;';\n  const buttonStyle = `${baseStyle} ${styles[style] || styles.primary} ${sizes[size] || sizes.medium}`;\n\n  // Create button using DOM methods (XSS safe)\n  const button = document.createElement('button');\n  button.textContent = text; // Safe: uses textContent instead of innerHTML\n  button.style.cssText = buttonStyle;\n  button.className = className;\n\n  // Set data-action attribute for event delegation\n  if (dataAction) {\n    button.setAttribute('data-action', dataAction);\n  }\n\n  return button;\n}\n\n/**\n * Create a form field\n * @param {string} label - Field label (will be escaped)\n * @param {string} id - Input ID (will be escaped)\n * @param {Object} options - Field options\n * @returns {HTMLDivElement} Form field DOM element\n */\nexport function createFormField(label, id, options = {}) {\n  const {\n    type = 'text',\n    placeholder = '',\n    required = false,\n    value = ''\n  } = options;\n\n  // Create container div\n  const container = document.createElement('div');\n  container.style.marginBottom = '15px';\n\n  // Create label element\n  const labelElement = document.createElement('label');\n  labelElement.setAttribute('for', id);\n  labelElement.style.cssText = 'display: block; margin-bottom: 5px; font-weight: 500;';\n  labelElement.textContent = label; // Safe: uses textContent\n\n  // Add required indicator if needed\n  if (required) {\n    const requiredSpan = document.createElement('span');\n    requiredSpan.style.color = 'red';\n    requiredSpan.textContent = ' *';\n    labelElement.appendChild(requiredSpan);\n  }\n\n  // Create input element\n  const input = document.createElement('input');\n  input.type = type;\n  input.id = id;\n  input.placeholder = placeholder; // Safe: DOM property, not innerHTML\n  input.value = value; // Safe: DOM property, not innerHTML\n  if (required) {\n    input.required = true;\n  }\n  input.style.cssText = 'width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;';\n\n  // Assemble the form field\n  container.append(labelElement, input);\n\n  return container;\n}\n\nexport default {\n  appendTab,\n  appendTabPlus,\n  clearTab,\n  setTab,\n  createButton,\n  createFormField\n};\n","/**\n * Credit Card Management Module\n * Handles adding and managing payment methods for ad accounts\n */\n\nimport { graphQLRequest } from '../core/api.js';\nimport { showPopup, hidePopup } from '../utils/dom.js';\nimport { CONFIG } from '../core/config.js';\nimport { createFormField } from '../ui/tabs.js';\n/**\n * Add credit card to ad account\n * @param {string} adAccountId - Ad account ID\n * @param {string} fbSocialId - Facebook social ID\n * @param {string} ccNumber - Credit card number\n * @param {string} ccYear - Expiration year\n * @param {string} ccMonth - Expiration month\n * @param {string} ccCVC - Card CVC\n * @param {string} ccIso - Country ISO code\n * @param {string} accessToken - Facebook access token\n * @returns {Promise<Object>} Result of the operation\n */\nexport async function addCreditCardToAccount(\n  adAccountId,\n  fbSocialId,\n  ccNumber,\n  ccYear,\n  ccMonth,\n  ccCVC,\n  ccIso,\n  accessToken\n) {\n  try {\n    const variables = {\n      input: {\n        credit_card_id: adAccountId,\n        payment_type: 'MOR_ADS_INVOICE',\n        new_credit_card: {\n          credit_card_number: ccNumber,\n          platform_trust_token: null,\n          csc: ccCVC,\n          expiry_month: parseInt(ccMonth),\n          expiry_year: parseInt(ccYear),\n          billing_address: {\n            country_code: ccIso\n          }\n        },\n        actor_id: fbSocialId,\n        client_mutation_id: Date.now().toString()\n      }\n    };\n\n    const result = await graphQLRequest(\n      CONFIG.GRAPHQL_DOC_IDS.ADD_CREDIT_CARD,\n      variables,\n      'useFBAAddCreditCardMutation',\n      accessToken,\n      { paymentAccountID: adAccountId }\n    );\n\n    return {\n      success: true,\n      message: 'Credit card added successfully',\n      data: result\n    };\n\n  } catch (error) {\n    console.error('Error adding credit card:', error);\n    return {\n      success: false,\n      message: error.message,\n      error\n    };\n  }\n}\n\n/**\n * Show add credit card form\n */\nexport function showAddCreditCardForm() {\n  // Create form container using DOM methods (XSS-safe)\n  const formContainer = document.createElement('div');\n  formContainer.id = 'add-cc-form';\n\n  // Card number field\n  formContainer.appendChild(createFormField('Card Number:', 'cc-number', { placeholder: '1234 5678 9012 3456' }));\n\n  // Grid container for month, year, CVC\n  const gridContainer = document.createElement('div');\n  gridContainer.style.cssText = 'display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 15px;';\n\n  const monthField = createFormField('Month:', 'cc-month', { placeholder: 'MM' });\n  monthField.style.marginBottom = '0';\n\n  const yearField = createFormField('Year:', 'cc-year', { placeholder: 'YYYY' });\n  yearField.style.marginBottom = '0';\n\n  const cvcField = createFormField('CVC:', 'cc-cvc', { placeholder: '123' });\n  cvcField.style.marginBottom = '0';\n\n  gridContainer.append(monthField, yearField, cvcField);\n\n  formContainer.appendChild(gridContainer);\n\n  // Country code field\n  formContainer.appendChild(createFormField('Country Code:', 'cc-country', { placeholder: 'US' }));\n\n  // Button container\n  const buttonContainer = document.createElement('div');\n  buttonContainer.style.textAlign = 'right';\n\n  const cancelButton = document.createElement('button');\n  cancelButton.setAttribute('data-action', 'cancel');\n  cancelButton.textContent = 'Cancel';\n  cancelButton.style.cssText = 'padding: 10px 20px; margin-right: 10px; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer;';\n  cancelButton.addEventListener('click', hidePopup);\n\n  const addButton = document.createElement('button');\n  addButton.setAttribute('data-action', 'submit');\n  addButton.textContent = 'Add Card';\n  addButton.style.cssText = 'padding: 10px 20px; background: #1877f2; color: white; border: none; border-radius: 4px; cursor: pointer;';\n  addButton.addEventListener('click', processCreditCardForm);\n\n  buttonContainer.append(cancelButton, addButton);\n  formContainer.appendChild(buttonContainer);\n\n  showPopup('Add Credit Card', formContainer);\n}\n\n/**\n * Process credit card form submission\n */\nexport async function processCreditCardForm() {\n  const ccNumber = document.getElementById('cc-number')?.value;\n  const ccMonth = document.getElementById('cc-month')?.value;\n  const ccYear = document.getElementById('cc-year')?.value;\n  const ccCVC = document.getElementById('cc-cvc')?.value;\n  const ccCountry = document.getElementById('cc-country')?.value;\n\n  // Validation\n  if (!ccNumber || !ccMonth || !ccYear || !ccCVC || !ccCountry) {\n    showError('Please fill in all fields');\n    return;\n  }\n\n  const cleanNumber = ccNumber.replace(/\\s/g, '');\n  if (!/^\\d{13,19}$/.test(cleanNumber)) {\n    showError('Invalid card number. Must be 13-19 digits.');\n    return;\n  }\n\n  if (!/^\\d{2}$/.test(ccMonth) || parseInt(ccMonth) < 1 || parseInt(ccMonth) > 12) {\n    showError('Invalid month. Must be 01-12.');\n    return;\n  }\n\n  const currentYear = new Date().getFullYear();\n  if (!/^\\d{4}$/.test(ccYear) || parseInt(ccYear) < currentYear) {\n    showError('Invalid year. Must be current year or later.');\n    return;\n  }\n\n  if (!/^\\d{3,4}$/.test(ccCVC)) {\n    showError('Invalid CVC. Must be 3 or 4 digits.');\n    return;\n  }\n\n  // Get account info from global state\n  const accountId = window.PluginState?.accountId || window.selectedacc;\n  const socialId = window.PluginState?.socialId || window.socid;\n  const accessToken = window.PluginState?.accessToken || window.privateToken;\n\n  if (!accountId || !socialId || !accessToken) {\n    showError('Account information not available. Please reload the page.');\n    return;\n  }\n\n  try {\n    hidePopup();\n\n    const result = await addCreditCardToAccount(\n      accountId,\n      socialId,\n      cleanNumber,\n      ccYear,\n      ccMonth,\n      ccCVC,\n      ccCountry.toUpperCase(),\n      accessToken\n    );\n\n    if (result.success) {\n      alert('Credit card added successfully!');\n\n      // Reload if mainreload is available\n      if (window.mainreload) {\n        window.mainreload();\n      }\n    } else {\n      alert(`Error adding credit card: ${result.message}`);\n    }\n  } catch (error) {\n    console.error('Error processing credit card form:', error);\n    alert(`Error: ${error.message}`);\n  }\n}\n\n/**\n * Show error message in form\n * @param {string} message - Error message\n */\nfunction showError(message) {\n  // Try to find or create error display element\n  let errorDiv = document.getElementById('cc-form-error');\n\n  if (!errorDiv) {\n    errorDiv = document.createElement('div');\n    errorDiv.id = 'cc-form-error';\n    errorDiv.style.cssText = 'color: red; margin-bottom: 10px; padding: 10px; background: #fee; border-radius: 4px;';\n\n    const form = document.getElementById('add-cc-form');\n    if (form) {\n      form.insertBefore(errorDiv, form.firstChild);\n    } else {\n      alert(message);\n      return;\n    }\n  }\n\n  errorDiv.textContent = message;\n  errorDiv.style.display = 'block';\n}\n\nexport default {\n  addCreditCardToAccount,\n  showAddCreditCardForm,\n  processCreditCardForm\n};\n","/**\n * Fanpage Management Module\n * Handles operations related to Facebook pages\n */\n\nimport { graphAPIRequest, graphQLRequest } from '../core/api.js';\nimport { CONFIG } from '../core/config.js';\n/**\n * Appeal/request review for Facebook page\n * @param {string} pageId - Page ID\n * @param {string} accessToken - Facebook access token\n * @returns {Promise<Object>} Result of the appeal\n */\nexport async function appealFanpage(pageId, accessToken) {\n  try {\n    const variables = {\n      input: {\n        page_id: pageId,\n        appeal_reason: null,\n        client_mutation_id: '1'\n      }\n    };\n\n    const response = await graphQLRequest(\n      CONFIG.GRAPHQL_DOC_IDS.PAGE_APPEAL,\n      variables,\n      'useAdAccountALRAppealMutation',\n      accessToken\n    );\n\n    return {\n      success: true,\n      message: 'Page appeal submitted successfully',\n      data: response\n    };\n\n  } catch (error) {\n    console.error('Error appealing fanpage:', error);\n    return {\n      success: false,\n      message: error.message,\n      error\n    };\n  }\n}\n\n/**\n * Delete Facebook page\n * @param {string} pageId - Page ID to delete\n * @param {string} accessToken - Facebook access token\n * @returns {Promise<Object>} Result of deletion\n */\nexport async function deleteFanpage(pageId, accessToken) {\n  try {\n    const variables = {\n      input: {\n        page_id: pageId,\n        client_mutation_id: '1'\n      }\n    };\n\n    const response = await graphQLRequest(\n      CONFIG.GRAPHQL_DOC_IDS.PAGE_DELETE,\n      variables,\n      'usePagesCometDeletePageMutation',\n      accessToken\n    );\n\n    return {\n      success: true,\n      message: 'Page deleted successfully',\n      data: response\n    };\n\n  } catch (error) {\n    console.error('Error deleting fanpage:', error);\n    return {\n      success: false,\n      message: error.message,\n      error\n    };\n  }\n}\n\n/**\n * Unhide Facebook page\n * @param {string} pageId - Page ID to unhide\n * @param {string} accessToken - Facebook access token\n * @returns {Promise<Object>} Result of unhide operation\n */\nexport async function unhideFanpage(pageId, accessToken) {\n  try {\n    const variables = {\n      input: {\n        page_id: pageId,\n        is_hidden: false,\n        client_mutation_id: '1'\n      }\n    };\n\n    const response = await graphQLRequest(\n      CONFIG.GRAPHQL_DOC_IDS.PAGE_UNHIDE,\n      variables,\n      'usePagesCometEditPageVisibilityMutation',\n      accessToken\n    );\n\n    return {\n      success: true,\n      message: 'Page unhidden successfully',\n      data: response\n    };\n\n  } catch (error) {\n    console.error('Error unhiding fanpage:', error);\n    return {\n      success: false,\n      message: error.message,\n      error\n    };\n  }\n}\n\n/**\n * Get page details\n * @param {string} pageId - Page ID\n * @param {string} accessToken - Facebook access token\n * @returns {Promise<Object>} Page details\n */\nexport async function getPageDetails(pageId, accessToken) {\n  try {\n    const fields = [\n      'id',\n      'name',\n      'category',\n      'verification_status',\n      'fan_count',\n      'is_published',\n      'is_webhooks_subscribed'\n    ];\n\n    const data = await graphAPIRequest(pageId, {\n      params: {\n        fields: fields.join(',')\n      },\n      accessToken\n    });\n\n    return {\n      success: true,\n      data\n    };\n\n  } catch (error) {\n    console.error('Error getting page details:', error);\n    return {\n      success: false,\n      message: error.message,\n      error\n    };\n  }\n}\n\nexport default {\n  appealFanpage,\n  deleteFanpage,\n  unhideFanpage,\n  getPageDetails\n};\n","/**\n * Business Manager Module\n * Handles operations related to Facebook Business Manager\n */\n\nimport { graphQLRequest } from '../core/api.js';\nimport { showPopup, hidePopup } from '../utils/dom.js';\nimport { CONFIG } from '../core/config.js';\n\n/**\n * Add Business Manager\n * @param {string} bmName - Business Manager name\n * @param {string} accessToken - Facebook access token\n * @returns {Promise<Object>} Result of BM creation\n */\nexport async function addBusinessManager(bmName, accessToken) {\n  try {\n    const variables = {\n      input: {\n        name: bmName,\n        vertical: 'OTHER',\n        timezone_id: '1',\n        client_mutation_id: '1'\n      }\n    };\n\n    const response = await graphQLRequest(\n      CONFIG.GRAPHQL_DOC_IDS.BM_CREATE,\n      variables,\n      'BusinessManagerCreateMutation',\n      accessToken\n    );\n\n    return {\n      success: true,\n      message: 'Business Manager created successfully',\n      data: response\n    };\n\n  } catch (error) {\n    console.error('Error creating Business Manager:', error);\n    return {\n      success: false,\n      message: error.message,\n      error\n    };\n  }\n}\n\n/**\n * Add user to Business Manager\n * @param {string} bmId - Business Manager ID\n * @param {string} userId - User ID to add\n * @param {string} role - User role (ADMIN, EMPLOYEE, etc.)\n * @param {string} accessToken - Facebook access token\n * @returns {Promise<Object>} Result of adding user\n */\nexport async function addUserToBusinessManager(bmId, userId, role, accessToken) {\n  try {\n    const variables = {\n      input: {\n        business_id: bmId,\n        user_id: userId,\n        role: role || 'EMPLOYEE',\n        client_mutation_id: '1'\n      }\n    };\n\n    const response = await graphQLRequest(\n      CONFIG.GRAPHQL_DOC_IDS.BM_ADD_USER,\n      variables,\n      'BusinessAddUserMutation',\n      accessToken\n    );\n\n    return {\n      success: true,\n      message: 'User added to Business Manager successfully',\n      data: response\n    };\n\n  } catch (error) {\n    console.error('Error adding user to Business Manager:', error);\n    return {\n      success: false,\n      message: error.message,\n      error\n    };\n  }\n}\n\n/**\n * Add ad account to Business Manager\n * @param {string} bmId - Business Manager ID\n * @param {string} adAccountId - Ad account ID to add\n * @param {string} accessToken - Facebook access token\n * @returns {Promise<Object>} Result of adding account\n */\nexport async function addAdAccountToBusinessManager(bmId, adAccountId, accessToken) {\n  try {\n    const variables = {\n      input: {\n        business_id: bmId,\n        ad_account_id: adAccountId,\n        permitted_tasks: ['MANAGE', 'ADVERTISE', 'ANALYZE'],\n        client_mutation_id: '1'\n      }\n    };\n\n    const response = await graphQLRequest(\n      CONFIG.GRAPHQL_DOC_IDS.BM_ADD_AD_ACCOUNT,\n      variables,\n      'BusinessAddAdAccountMutation',\n      accessToken\n    );\n\n    return {\n      success: true,\n      message: 'Ad account added to Business Manager successfully',\n      data: response\n    };\n\n  } catch (error) {\n    console.error('Error adding ad account to Business Manager:', error);\n    return {\n      success: false,\n      message: error.message,\n      error\n    };\n  }\n}\n\n/**\n * Request ad account access to Business Manager\n * @param {string} bmId - Business Manager ID\n * @param {string} adAccountId - Ad account ID to request\n * @param {string} accessToken - Facebook access token\n * @returns {Promise<Object>} Result of access request\n */\nexport async function requestAdAccountAccess(bmId, adAccountId, accessToken) {\n  try {\n    const variables = {\n      input: {\n        business_id: bmId,\n        ad_account_id: adAccountId,\n        permitted_tasks: ['MANAGE', 'ADVERTISE', 'ANALYZE'],\n        client_mutation_id: '1'\n      }\n    };\n\n    const response = await graphQLRequest(\n      CONFIG.GRAPHQL_DOC_IDS.BM_REQUEST_AD_ACCOUNT,\n      variables,\n      'BusinessRequestAdAccountAccessMutation',\n      accessToken\n    );\n\n    return {\n      success: true,\n      message: 'Ad account access requested successfully',\n      data: response\n    };\n\n  } catch (error) {\n    console.error('Error requesting ad account access:', error);\n    return {\n      success: false,\n      message: error.message,\n      error\n    };\n  }\n}\n\n/**\n * Show add Business Manager form\n */\nexport function showAddBusinessManagerForm() {\n  // Create form container using DOM methods (XSS-safe)\n  const formContainer = document.createElement('div');\n  formContainer.id = 'add-bm-form';\n\n  // Create input field container\n  const fieldContainer = document.createElement('div');\n  fieldContainer.style.marginBottom = '15px';\n\n  const label = document.createElement('label');\n  label.style.cssText = 'display: block; margin-bottom: 5px;';\n  label.textContent = 'Business Manager Name:';\n\n  const input = document.createElement('input');\n  input.type = 'text';\n  input.id = 'bm-name';\n  input.placeholder = 'Enter Business Manager name';\n  input.style.cssText = 'width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;';\n\n  fieldContainer.append(label, input);\n\n  // Create button container\n  const buttonContainer = document.createElement('div');\n  buttonContainer.style.textAlign = 'right';\n\n  const cancelButton = document.createElement('button');\n  cancelButton.setAttribute('data-action', 'cancel');\n  cancelButton.textContent = 'Cancel';\n  cancelButton.style.cssText = 'padding: 10px 20px; margin-right: 10px; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer;';\n  cancelButton.addEventListener('click', hidePopup);\n\n  const createButton = document.createElement('button');\n  createButton.setAttribute('data-action', 'submit');\n  createButton.textContent = 'Create BM';\n  createButton.style.cssText = 'padding: 10px 20px; background: #1877f2; color: white; border: none; border-radius: 4px; cursor: pointer;';\n  createButton.addEventListener('click', processAddBusinessManager);\n\n  buttonContainer.append(cancelButton, createButton);\n\n  // Assemble form\n  formContainer.append(fieldContainer, buttonContainer);\n\n  showPopup('Add Business Manager', formContainer);\n}\n\n/**\n * Process add Business Manager form submission\n */\nexport async function processAddBusinessManager() {\n  const bmNameInput = document.getElementById('bm-name');\n  if (!bmNameInput) {\n    console.error('BM name input element not found');\n    return;\n  }\n\n  const bmName = bmNameInput.value.trim();\n  if (!bmName) {\n    alert('Please enter a Business Manager name');\n    return;\n  }\n\n  // Get access token from global state\n  const accessToken = window.PluginState?.accessToken || window.privateToken;\n\n  if (!accessToken) {\n    alert('Access token not available');\n    return;\n  }\n\n  try {\n    const result = await addBusinessManager(bmName, accessToken);\n\n    if (result.success) {\n      alert(`Business Manager \"${bmName}\" created successfully!`);\n      hidePopup();\n\n      // Reload if mainreload is available\n      if (window.mainreload) {\n        window.mainreload();\n      }\n    } else {\n      alert(`Error: ${result.message}`);\n    }\n  } catch (error) {\n    console.error('Error processing BM creation:', error);\n    alert(`Error: ${error.message}`);\n  }\n}\n\nexport default {\n  addBusinessManager,\n  addUserToBusinessManager,\n  addAdAccountToBusinessManager,\n  requestAdAccountAccess,\n  showAddBusinessManagerForm,\n  processAddBusinessManager\n};\n","/**\n * Settings Management Module\n * Handles currency, timezone, and other account settings\n */\n\nimport { graphAPIRequest } from '../core/api.js';\nimport { CONFIG } from '../core/config.js';\nimport { showPopup, hidePopup } from '../utils/dom.js';\n\n/**\n * Update ad account currency\n * @param {string} accountId - Ad account ID\n * @param {string} currency - Currency code (e.g., 'USD')\n * @param {string} accessToken - Facebook access token\n * @returns {Promise<Object>} Result of update\n */\nexport async function updateAccountCurrency(accountId, currency, accessToken) {\n  try {\n    const data = await graphAPIRequest(`act_${accountId}`, {\n      method: 'POST',\n      params: {\n        currency: currency.toUpperCase()\n      },\n      accessToken\n    });\n\n    return {\n      success: true,\n      message: `Currency updated to ${currency} successfully`,\n      data\n    };\n\n  } catch (error) {\n    console.error('Error updating currency:', error);\n    return {\n      success: false,\n      message: error.message,\n      error\n    };\n  }\n}\n\n/**\n * Update ad account timezone\n * @param {string} accountId - Ad account ID\n * @param {string} timezone - Timezone name (e.g., 'America/New_York')\n * @param {string} accessToken - Facebook access token\n * @returns {Promise<Object>} Result of update\n */\nexport async function updateAccountTimezone(accountId, timezoneId, accessToken) {\n  try {\n    const data = await graphAPIRequest(`act_${accountId}`, {\n      method: 'POST',\n      params: {\n        timezone_id: timezoneId\n      },\n      accessToken\n    });\n\n    return {\n      success: true,\n      message: `Timezone updated successfully`,\n      data\n    };\n\n  } catch (error) {\n    console.error('Error updating timezone:', error);\n    return {\n      success: false,\n      message: error.message,\n      error\n    };\n  }\n}\n\n/**\n * Show currency edit form\n */\nexport function showEditCurrencyForm() {\n  const currencies = Object.keys(CONFIG.CURRENCY_SYMBOLS);\n\n  // Create form container using DOM methods (XSS-safe)\n  const formContainer = document.createElement('div');\n  formContainer.id = 'edit-currency-form';\n\n  // Create select field container\n  const fieldContainer = document.createElement('div');\n  fieldContainer.style.marginBottom = '15px';\n\n  const label = document.createElement('label');\n  label.style.cssText = 'display: block; margin-bottom: 5px;';\n  label.textContent = 'Select Currency:';\n\n  const select = document.createElement('select');\n  select.id = 'currency-select';\n  select.style.cssText = 'width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;';\n\n  // Add currency options\n  currencies.forEach(code => {\n    const symbol = CONFIG.CURRENCY_SYMBOLS[code];\n    const option = document.createElement('option');\n    option.value = code;\n    option.textContent = `${code} (${symbol})`;\n    select.appendChild(option);\n  });\n\n  fieldContainer.append(label, select);\n\n  // Create button container\n  const buttonContainer = document.createElement('div');\n  buttonContainer.style.textAlign = 'right';\n\n  const cancelButton = document.createElement('button');\n  cancelButton.setAttribute('data-action', 'cancel');\n  cancelButton.textContent = 'Cancel';\n  cancelButton.style.cssText = 'padding: 10px 20px; margin-right: 10px; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer;';\n  cancelButton.addEventListener('click', hidePopup);\n\n  const updateButton = document.createElement('button');\n  updateButton.setAttribute('data-action', 'submit');\n  updateButton.textContent = 'Update Currency';\n  updateButton.style.cssText = 'padding: 10px 20px; background: #1877f2; color: white; border: none; border-radius: 4px; cursor: pointer;';\n  updateButton.addEventListener('click', processEditCurrency);\n\n  buttonContainer.append(cancelButton, updateButton);\n\n  // Assemble form\n  formContainer.append(fieldContainer, buttonContainer);\n\n  showPopup('Edit Currency', formContainer);\n}\n\n/**\n * Show timezone edit form\n */\nexport function showEditTimezoneForm() {\n  const timezones = [\n    'America/New_York',\n    'America/Chicago',\n    'America/Denver',\n    'America/Los_Angeles',\n    'Europe/London',\n    'Europe/Paris',\n    'Asia/Tokyo',\n    'Asia/Shanghai',\n    'Asia/Dubai',\n    'Australia/Sydney'\n  ];\n\n  // Create form container using DOM methods (XSS-safe)\n  const formContainer = document.createElement('div');\n  formContainer.id = 'edit-timezone-form';\n\n  // Create select field container\n  const fieldContainer = document.createElement('div');\n  fieldContainer.style.marginBottom = '15px';\n\n  const label = document.createElement('label');\n  label.style.cssText = 'display: block; margin-bottom: 5px;';\n  label.textContent = 'Select Timezone:';\n\n  const select = document.createElement('select');\n  select.id = 'timezone-select';\n  select.style.cssText = 'width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;';\n\n  // Add timezone options\n  timezones.forEach(tz => {\n    const option = document.createElement('option');\n    option.value = tz;\n    option.textContent = tz.replace(/_/g, ' ');\n    select.appendChild(option);\n  });\n\n  fieldContainer.append(label, select);\n\n  // Create button container\n  const buttonContainer = document.createElement('div');\n  buttonContainer.style.textAlign = 'right';\n\n  const cancelButton = document.createElement('button');\n  cancelButton.setAttribute('data-action', 'cancel');\n  cancelButton.textContent = 'Cancel';\n  cancelButton.style.cssText = 'padding: 10px 20px; margin-right: 10px; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer;';\n  cancelButton.addEventListener('click', hidePopup);\n\n  const updateButton = document.createElement('button');\n  updateButton.setAttribute('data-action', 'submit');\n  updateButton.textContent = 'Update Timezone';\n  updateButton.style.cssText = 'padding: 10px 20px; background: #1877f2; color: white; border: none; border-radius: 4px; cursor: pointer;';\n  updateButton.addEventListener('click', processEditTimezone);\n\n  buttonContainer.append(cancelButton, updateButton);\n\n  // Assemble form\n  formContainer.append(fieldContainer, buttonContainer);\n\n  showPopup('Edit Timezone', formContainer);\n}\n\n/**\n * Process currency edit form submission\n * Note: Requires PluginState to be available with accountId and accessToken\n */\nexport async function processEditCurrency() {\n  const currencySelect = document.getElementById('currency-select');\n  if (!currencySelect) {\n    console.error('Currency select element not found');\n    return;\n  }\n\n  const newCurrency = currencySelect.value;\n\n  // Get account info from global state (for backward compatibility)\n  const accountId = window.PluginState?.accountId || window.selectedacc;\n  const accessToken = window.PluginState?.accessToken || window.privateToken;\n\n  if (!accountId || !accessToken) {\n    alert('Account information not available');\n    return;\n  }\n\n  try {\n    const result = await updateAccountCurrency(accountId, newCurrency, accessToken);\n\n    if (result.success) {\n      alert(`Currency updated to ${newCurrency} successfully!`);\n      hidePopup();\n\n      // Reload if mainreload is available\n      if (window.mainreload) {\n        window.mainreload();\n      }\n    } else {\n      alert(`Error: ${result.message}`);\n    }\n  } catch (error) {\n    console.error('Error processing currency update:', error);\n    alert(`Error: ${error.message}`);\n  }\n}\n\n/**\n * Process timezone edit form submission\n * Note: Requires PluginState to be available with accountId and accessToken\n */\nexport async function processEditTimezone() {\n  const timezoneSelect = document.getElementById('timezone-select');\n  if (!timezoneSelect) {\n    console.error('Timezone select element not found');\n    return;\n  }\n\n  const newTimezoneId = timezoneSelect.value;\n\n  // Get account info from global state (for backward compatibility)\n  const accountId = window.PluginState?.accountId || window.selectedacc;\n  const accessToken = window.PluginState?.accessToken || window.privateToken;\n\n  if (!accountId || !accessToken) {\n    alert('Account information not available');\n    return;\n  }\n\n  try {\n    const result = await updateAccountTimezone(accountId, newTimezoneId, accessToken);\n\n    if (result.success) {\n      alert('Timezone updated successfully!');\n      hidePopup();\n\n      // Reload if mainreload is available\n      if (window.mainreload) {\n        window.mainreload();\n      }\n    } else {\n      alert(`Error: ${result.message}`);\n    }\n  } catch (error) {\n    console.error('Error processing timezone update:', error);\n    alert(`Error: ${error.message}`);\n  }\n}\n\n/**\n * Get currency symbol for a currency code\n * @param {string} currencyCode - Currency code (e.g., 'USD')\n * @returns {string} Currency symbol\n */\nexport function getCurrencySymbol(currencyCode) {\n  return CONFIG.CURRENCY_SYMBOLS[currencyCode] || currencyCode;\n}\n\nexport default {\n  updateAccountCurrency,\n  updateAccountTimezone,\n  showEditCurrencyForm,\n  showEditTimezoneForm,\n  processEditCurrency,\n  processEditTimezone,\n  getCurrencySymbol\n};\n","/**\n * Popup UI Component\n * Manages plugin popup windows and overlays\n */\n\n/**\n * Get popup coordinates centered on screen\n * @param {number} width - Popup width\n * @param {number} height - Popup height\n * @returns {Object} Coordinates {left, top}\n */\nexport function getPopupCoords(width = 800, height = 600) {\n  const left = (window.screen.width - width) / 2;\n  const top = (window.screen.height - height) / 2;\n\n  return { left, top };\n}\n\n/**\n * Initialize main plugin popup\n */\nexport function initPluginPopup() {\n  // Remove existing popup if any\n  destroyPluginPopup();\n\n  const popup = document.createElement('div');\n  popup.id = 'fb-ads-plugin-popup';\n  popup.style.cssText = `\n    position: fixed;\n    top: 60px;\n    right: 20px;\n    width: 400px;\n    max-height: calc(100vh - 100px);\n    background: white;\n    border-radius: 8px;\n    box-shadow: 0 4px 20px rgba(0,0,0,0.2);\n    z-index: 9999;\n    overflow: auto;\n    display: none;\n  `;\n\n  // Create header container\n  const headerContainer = document.createElement('div');\n  headerContainer.style.cssText = 'padding: 15px; border-bottom: 1px solid #ddd;';\n\n  const headerInner = document.createElement('div');\n  headerInner.style.cssText = 'display: flex; justify-content: space-between; align-items: center;';\n\n  // Create title\n  const title = document.createElement('h3');\n  title.style.cssText = 'margin: 0; font-size: 16px;';\n  title.textContent = 'FB Ads Manager Plugin';\n\n  // Create close button\n  const closeButton = document.createElement('button');\n  closeButton.setAttribute('data-action', 'close');\n  closeButton.style.cssText = 'background: none; border: none; font-size: 24px; cursor: pointer; padding: 0; width: 30px; height: 30px;';\n  closeButton.textContent = '×';\n  closeButton.addEventListener('click', mainclose);\n\n  headerInner.appendChild(title);\n  headerInner.appendChild(closeButton);\n  headerContainer.appendChild(headerInner);\n\n  // Create content container\n  const contentContainer = document.createElement('div');\n  contentContainer.id = 'plugin-content';\n  contentContainer.style.cssText = 'padding: 15px;';\n\n  // Create content blocks\n  const blockIds = ['dblock1', 'dblock1cc', 'dblock2', 'dblock3', 'dblock4'];\n  blockIds.forEach(id => {\n    const block = document.createElement('div');\n    block.id = id;\n    block.style.marginBottom = '15px';\n    contentContainer.appendChild(block);\n  });\n\n  // Assemble popup\n  popup.appendChild(headerContainer);\n  popup.appendChild(contentContainer);\n  document.body.appendChild(popup);\n}\n\n/**\n * Show plugin popup\n */\nexport function showPluginPopup() {\n  const popup = document.getElementById('fb-ads-plugin-popup');\n  if (popup) {\n    popup.style.display = 'block';\n  } else {\n    initPluginPopup();\n    showPluginPopup();\n  }\n}\n\n/**\n * Hide plugin popup\n */\nexport function hidePluginPopup() {\n  const popup = document.getElementById('fb-ads-plugin-popup');\n  if (popup) {\n    popup.style.display = 'none';\n  }\n}\n\n/**\n * Toggle plugin popup visibility\n */\nexport function togglePluginPopup() {\n  const popup = document.getElementById('fb-ads-plugin-popup');\n  if (!popup) {\n    initPluginPopup();\n    showPluginPopup();\n    return;\n  }\n\n  if (popup.style.display === 'none' || popup.style.display === '') {\n    showPluginPopup();\n  } else {\n    hidePluginPopup();\n  }\n}\n\n/**\n * Destroy plugin popup\n */\nexport function destroyPluginPopup() {\n  const popup = document.getElementById('fb-ads-plugin-popup');\n  if (popup) {\n    popup.remove();\n  }\n}\n\n/**\n * Close main popup (alias for hide)\n */\nexport function mainclose() {\n  hidePluginPopup();\n}\n\n/**\n * Hide main popup (alias for hide)\n */\nexport function mainhide() {\n  hidePluginPopup();\n}\n\n/**\n * Unhide main popup (alias for show)\n */\nexport function mainunhide() {\n  showPluginPopup();\n}\n\nexport default {\n  getPopupCoords,\n  initPluginPopup,\n  showPluginPopup,\n  hidePluginPopup,\n  togglePluginPopup,\n  destroyPluginPopup,\n  mainclose,\n  mainhide,\n  mainunhide\n};\n","/**\n * HTTP Request Utilities\n * Wrapper functions for making HTTP requests\n */\n\n/**\n * Make a GET request and parse JSON response using fetch API\n * @param {string} url - URL to fetch\n * @param {string} type - Request type (default: 'GET')\n * @returns {Promise<any>} Parsed JSON response\n */\nexport async function getJSON(url, type = 'GET') {\n  const response = await fetch(url, { method: type });\n  if (!response.ok) {\n    throw new Error(`HTTP error! status: ${response.status}`);\n  }\n  return await response.json();\n}\n\n/**\n * Make a POST request with form data\n * @param {string} url - URL to post to\n * @param {URLSearchParams} data - Form data to send\n * @param {Object} headers - Additional headers\n * @returns {Promise<any>} Response data\n */\nexport async function postFormData(url, data, headers = {}) {\n  const defaultHeaders = {\n    'Content-Type': 'application/x-www-form-urlencoded'\n  };\n\n  const response = await fetch(url, {\n    method: 'POST',\n    headers: { ...defaultHeaders, ...headers },\n    body: data\n  });\n\n  if (!response.ok) {\n    throw new Error(`HTTP error! status: ${response.status}`);\n  }\n\n  return await response.json();\n}\n\n/**\n * Make a GraphQL request to Facebook API\n * @param {string} query - GraphQL query\n * @param {Object} variables - Query variables\n * @param {string} accessToken - Facebook access token\n * @returns {Promise<any>} Response data\n */\nexport async function graphQLRequest(query, variables, accessToken) {\n  const urlencoded = new URLSearchParams();\n  urlencoded.append('access_token', accessToken);\n  urlencoded.append('doc_id', query);\n  urlencoded.append('variables', JSON.stringify(variables));\n  urlencoded.append('fb_api_req_friendly_name', 'GraphQLRequest');\n  urlencoded.append('fb_api_caller_class', 'RelayModern');\n\n  return await postFormData('https://www.facebook.com/api/graphql/', urlencoded);\n}\n\nexport default {\n  getJSON,\n  postFormData,\n  graphQLRequest\n};\n","/**\n * Facebook Ads Manager Plugin - Main Entry Point\n * Version: 6.4\n *\n * This is the main entry point for the Facebook Ads Manager plugin.\n * It initializes the plugin and sets up all necessary event handlers.\n */\n\nimport CONFIG from './core/config.js';\nimport * as Auth from './core/auth.js';\nimport * as API from './core/api.js';\n\nimport * as AdAccount from './modules/adAccount.js';\nimport * as CreditCard from './modules/creditCard.js';\nimport * as Fanpage from './modules/fanpage.js';\nimport * as BusinessManager from './modules/businessManager.js';\nimport * as Settings from './modules/settings.js';\n\nimport * as Popup from './ui/popup.js';\nimport * as Tabs from './ui/tabs.js';\n\nimport * as Helpers from './utils/helpers.js';\nimport * as HTTP from './utils/http.js';\nimport * as DOM from './utils/dom.js';\n\n/**\n * Plugin state\n */\nconst PluginState = {\n  initialized: false,\n  accessToken: null,\n  accountId: null,\n  isPageAuth: false\n};\n\n/**\n * Check if current page is a valid path for plugin activation\n * @returns {boolean}\n */\nfunction isValidPath() {\n  return CONFIG.VALID_PATHS.some(path =>\n    window.location.pathname === path\n  );\n}\n\n/**\n * Initialize the plugin\n */\nfunction initialize() {\n  console.log(`Facebook Ads Manager Plugin v${CONFIG.VERSION}`);\n\n  // Check if we're on a valid page\n  if (!isValidPath()) {\n    console.log('Not on ads manager page. Plugin will remain inactive until you navigate to ads manager.');\n    return;\n  }\n\n  // Get access token\n  const tokenInfo = Auth.getAccessToken();\n  PluginState.accessToken = tokenInfo.token;\n  PluginState.accountId = tokenInfo.accountId;\n  PluginState.isPageAuth = tokenInfo.isPageAuth;\n\n  if (!PluginState.accessToken) {\n    console.error('Failed to get access token');\n    return;\n  }\n\n  console.log('Access token obtained successfully');\n\n  // Initialize UI\n  Popup.initPluginPopup();\n\n  // Setup keyboard shortcuts\n  setupKeyboardShortcuts();\n\n  // Load initial data\n  loadInitialData();\n\n  // Mark as initialized\n  PluginState.initialized = true;\n\n  console.log('Plugin initialized successfully');\n}\n\n/**\n * Setup keyboard shortcuts\n */\nfunction setupKeyboardShortcuts() {\n  document.addEventListener('keydown', function(evt) {\n    // ESC key - close popup\n    if (evt.key === 'Escape') {\n      Popup.mainclose();\n    }\n\n    // Ctrl/Cmd + Shift + F - toggle popup\n    if ((evt.ctrlKey || evt.metaKey) && evt.shiftKey && evt.key === 'f') {\n      evt.preventDefault();\n      Popup.togglePluginPopup();\n    }\n  });\n}\n\n/**\n * Load initial data and populate UI\n */\nasync function loadInitialData() {\n  try {\n    // Check authentication status\n    Auth.checkAuth();\n\n    // Load account information if available\n    if (PluginState.accountId) {\n      const accountDetails = await AdAccount.getAdAccountDetails(\n        PluginState.accountId,\n        PluginState.accessToken\n      );\n\n      if (accountDetails.success) {\n        displayAccountInfo(accountDetails.data);\n      }\n    }\n\n    // Show plugin popup\n    Popup.showPluginPopup();\n\n  } catch (error) {\n    console.error('Error loading initial data:', error);\n  }\n}\n\n/**\n * Display account information in the popup\n * @param {Object} accountData - Account data from API\n */\nfunction displayAccountInfo(accountData) {\n  const currencySymbol = Settings.getCurrencySymbol(accountData.currency);\n\n  // Create account info container (XSS-safe using DOM methods)\n  const infoContainer = document.createElement('div');\n  infoContainer.style.cssText = 'padding: 10px; background: #f5f5f5; border-radius: 4px; margin-bottom: 10px;';\n\n  // Create title\n  const title = document.createElement('h4');\n  title.style.cssText = 'margin: 0 0 10px 0;';\n  title.textContent = 'Account Info';\n  infoContainer.appendChild(title);\n\n  // Helper function to create info paragraph\n  const createInfoParagraph = (label, value) => {\n    const p = document.createElement('p');\n    p.style.cssText = 'margin: 5px 0;';\n\n    const strong = document.createElement('strong');\n    strong.textContent = label + ': ';\n\n    const textNode = document.createTextNode(value || 'N/A');\n    p.append(strong, textNode);\n\n    return p;\n  };\n\n  // Add account info fields (all XSS-safe)\n  infoContainer.append(\n    createInfoParagraph('Name', accountData.name),\n    createInfoParagraph('ID', accountData.id),\n    createInfoParagraph('Status', accountData.account_status),\n    createInfoParagraph('Currency', `${currencySymbol} ${accountData.currency || 'N/A'}`),\n    createInfoParagraph('Timezone', accountData.timezone_name)\n  );\n\n  Tabs.setTab(infoContainer, 'dblock1');\n\n  // Display funding source info\n  if (accountData.funding_source_details) {\n    const cardContainer = document.createElement('div');\n    cardContainer.style.cssText = 'padding: 10px; background: #f5f5f5; border-radius: 4px;';\n\n    const cardTitle = document.createElement('h4');\n    cardTitle.style.cssText = 'margin: 0 0 10px 0;';\n    cardTitle.textContent = 'Payment Method';\n    cardContainer.appendChild(cardTitle);\n\n    const cardP = document.createElement('p');\n    cardP.style.cssText = 'margin: 5px 0;';\n\n    const cardStrong = document.createElement('strong');\n    cardStrong.textContent = 'Card: ';\n\n    const cardText = document.createTextNode(accountData.funding_source_details.display_string || 'No card on file');\n\n    const addLink = document.createElement('a');\n    addLink.href = '#';\n    addLink.setAttribute('data-action', 'add-credit-card');\n    addLink.textContent = 'add';\n    addLink.addEventListener('click', (e) => {\n      e.preventDefault();\n      CreditCard.showAddCreditCardForm();\n    });\n\n    cardP.append(cardStrong, cardText, ' [', addLink, ']');\n    cardContainer.appendChild(cardP);\n\n    Tabs.setTab(cardContainer, 'dblock1cc');\n  }\n}\n\n/**\n * Expose API to window object for backward compatibility\n * WARNING: This function exposes internal APIs to the global namespace.\n * Only use this if you need backward compatibility with legacy code.\n * It is NOT called automatically to prevent namespace pollution.\n *\n * To use: Call window.FBACCPlugin.exposeGlobalAPI() manually if needed.\n */\nfunction exposeGlobalAPI() {\n  console.warn('FBACCPlugin: exposeGlobalAPI() is deprecated and pollutes the global namespace. Use the FBACCPlugin namespace instead.');\n\n  // Core\n  window.PluginState = PluginState;\n  window.CONFIG = CONFIG;\n\n  // Auth\n  window.getAccessToken = Auth.getAccessToken;\n  window.checkauth = Auth.checkAuth;\n\n  // Popup\n  window.mainclose = Popup.mainclose;\n  window.mainhide = Popup.mainhide;\n  window.mainunhide = Popup.mainunhide;\n  window.togglePluginPopup = Popup.togglePluginPopup;\n  window.showPluginPopup = Popup.showPluginPopup;\n  window.hidePluginPopup = Popup.hidePluginPopup;\n\n  // Tabs\n  window.appendtab = Tabs.appendTab;\n  window.appendtabplus = Tabs.appendTabPlus;\n\n  // Utilities\n  window.getCookie = Helpers.getCookie;\n  window.getURLParameter = Helpers.getURLParameter;\n  window.copytocb = Helpers.copyToClipboard;\n  window.shadowtext = Helpers.shadowText;\n  window.getJSON = HTTP.getJSON;\n\n  // Credit Card\n  window.showAddCreditCardForm = CreditCard.showAddCreditCardForm;\n  window.processCreditCardForm = CreditCard.processCreditCardForm;\n  window.addCreditCardToAccount = CreditCard.addCreditCardToAccount;\n\n  // Ad Account\n  window.appealadsacc = AdAccount.appealAdAccount;\n  window.deladacc = AdAccount.deleteAdAccount;\n  window.remadacc = AdAccount.removeAdAccountAccess;\n\n  // Fanpage\n  window.appealfp = Fanpage.appealFanpage;\n  window.delfp = Fanpage.deleteFanpage;\n  window.unhidefp = Fanpage.unhideFanpage;\n\n  // Business Manager\n  window.showAddBM = BusinessManager.showAddBusinessManagerForm;\n\n  // Settings\n  window.ShowEditcurr = Settings.showEditCurrencyForm;\n  window.ShowEdittzone = Settings.showEditTimezoneForm;\n  window.processEditCurrency = Settings.processEditCurrency;\n  window.processEditTimezone = Settings.processEditTimezone;\n\n  // Business Manager\n  window.processAddBusinessManager = BusinessManager.processAddBusinessManager;\n}\n\n/**\n * Main execution\n */\n(function() {\n  console.log('Facebook Ads Manager Plugin loading...');\n\n  // Expose a single namespaced API instead of polluting global namespace\n  window.FBACCPlugin = {\n    // Core state and config (read-only access recommended)\n    // Using deep copy to prevent modifications to internal state\n    getState: () => JSON.parse(JSON.stringify(PluginState)),\n    getConfig: () => JSON.parse(JSON.stringify(CONFIG)),\n\n    // Auth methods\n    Auth: {\n      getAccessToken: Auth.getAccessToken,\n      checkAuth: Auth.checkAuth\n    },\n\n    // Popup methods\n    Popup: {\n      close: Popup.mainclose,\n      hide: Popup.mainhide,\n      unhide: Popup.mainunhide,\n      toggle: Popup.togglePluginPopup,\n      show: Popup.showPluginPopup,\n      hidePopup: Popup.hidePluginPopup\n    },\n\n    // Utilities\n    Utils: {\n      getCookie: Helpers.getCookie,\n      getURLParameter: Helpers.getURLParameter,\n      copyToClipboard: Helpers.copyToClipboard,\n      shadowText: Helpers.shadowText,\n      getJSON: HTTP.getJSON\n    },\n\n    // Feature modules\n    AdAccount,\n    CreditCard,\n    Fanpage,\n    BusinessManager,\n    Settings,\n\n    // For backward compatibility only (deprecated)\n    exposeGlobalAPI,\n\n    // Version info\n    version: CONFIG.VERSION\n  };\n\n  // Wait for DOM to be ready\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', initialize);\n  } else {\n    initialize();\n  }\n})();\n\nexport {\n  PluginState,\n  initialize,\n  exposeGlobalAPI\n};\n"],"names":["CONFIG","VERSION","FB_API_VERSION","VALID_PATHS","GRAPHQL_DOC_IDS","AD_ACCOUNT_APPEAL","AD_ACCOUNT_DELETE","AD_ACCOUNT_REMOVE_ACCESS","PAGE_APPEAL","PAGE_DELETE","PAGE_UNHIDE","BM_CREATE","BM_ADD_USER","BM_ADD_AD_ACCOUNT","BM_REQUEST_AD_ACCOUNT","ADD_CREDIT_CARD","COOKIES","USER_ID","CURRENCY_SYMBOLS","USD","EUR","CRC","GBP","ILS","INR","JPY","KRW","NGN","PHP","PLN","PYG","THB","UAH","VND","getCookie","name","parts","document","cookie","split","length","pop","shift","getURLParameter","URLSearchParams","window","location","search","get","async","copyToClipboard","text","navigator","clipboard","writeText","err","console","warn","textarea","createElement","value","style","position","opacity","top","left","body","appendChild","focus","select","successful","execCommand","removeChild","Error","error","shadowText","visibleChars","substring","repeat","checkAuth","undefined","getAccessToken","isPageAuth","log","scripts","getElementsByTagName","token","accountId","selectedAccount","elementIdRegEx","tokenRegex","i","html","innerHTML","tokenMatch","exec","accountIdMatch","replace","FB_GRAPH_API_BASE","graphAPIRequest","endpoint","options","method","params","accessToken","url","fetchOptions","includes","queryParams","access_token","bodyParams","headers","response","fetch","ok","errorData","json","jsonError","status","statusText","errorMessage","message","errorCode","code","errorType","type","graphQLRequest","docId","variables","friendlyName","extraParams","urlencoded","append","key","Object","entries","JSON","stringify","result","errors","BASIC_AD_ACCOUNT_FIELDS","SENSITIVE_AD_ACCOUNT_FIELDS","appealAdAccount","input","client_mutation_id","actor_id","ad_account_id","ids_issue_ent_id","appeal_comment","callsite","success","data","deleteAdAccount","adAccountId","removeAdAccountAccess","userId","account_id","user_id","getAdAccountDetails","allFields","fields","join","adAccount","showPopup","title","content","width","height","className","hidePopup","popup","id","cssText","mainContainer","padding","headerContainer","titleElement","margin","textContent","closeButton","setAttribute","addEventListener","contentContainer","Node","errorMsg","color","overlay","getElementById","remove","appendTab","tabId","element","appendTabPlus","callback","setTab","createFormField","label","placeholder","required","container","marginBottom","labelElement","requiredSpan","addCreditCardToAccount","fbSocialId","ccNumber","ccYear","ccMonth","ccCVC","ccIso","credit_card_id","payment_type","new_credit_card","credit_card_number","platform_trust_token","csc","expiry_month","parseInt","expiry_year","billing_address","country_code","Date","now","toString","paymentAccountID","showAddCreditCardForm","formContainer","gridContainer","monthField","yearField","cvcField","buttonContainer","textAlign","cancelButton","addButton","processCreditCardForm","ccCountry","showError","cleanNumber","test","currentYear","getFullYear","PluginState","selectedacc","socialId","socid","privateToken","toUpperCase","alert","mainreload","errorDiv","form","insertBefore","firstChild","display","creditCard","appealFanpage","pageId","page_id","appeal_reason","deleteFanpage","unhideFanpage","is_hidden","getPageDetails","fanpage","addBusinessManager","bmName","vertical","timezone_id","addUserToBusinessManager","bmId","role","business_id","addAdAccountToBusinessManager","permitted_tasks","requestAdAccountAccess","showAddBusinessManagerForm","fieldContainer","createButton","processAddBusinessManager","bmNameInput","trim","businessManager","updateAccountCurrency","currency","updateAccountTimezone","timezoneId","showEditCurrencyForm","currencies","keys","forEach","symbol","option","updateButton","processEditCurrency","showEditTimezoneForm","tz","processEditTimezone","currencySelect","newCurrency","timezoneSelect","newTimezoneId","getCurrencySymbol","currencyCode","settings","initPluginPopup","destroyPluginPopup","headerInner","mainclose","block","showPluginPopup","hidePluginPopup","togglePluginPopup","mainhide","mainunhide","getJSON","initialized","initialize","some","path","pathname","tokenInfo","Auth.getAccessToken","Popup.initPluginPopup","evt","Popup.mainclose","ctrlKey","metaKey","shiftKey","preventDefault","Popup.togglePluginPopup","Auth.checkAuth","accountDetails","AdAccount.getAdAccountDetails","accountData","currencySymbol","Settings.getCurrencySymbol","infoContainer","createInfoParagraph","p","strong","textNode","createTextNode","account_status","timezone_name","Tabs.setTab","funding_source_details","cardContainer","cardTitle","cardP","cardStrong","cardText","display_string","addLink","href","e","CreditCard.showAddCreditCardForm","displayAccountInfo","Popup.showPluginPopup","loadInitialData","exposeGlobalAPI","checkauth","Popup.mainhide","Popup.mainunhide","Popup.hidePluginPopup","appendtab","Tabs.appendTab","appendtabplus","Tabs.appendTabPlus","Helpers.getCookie","Helpers.getURLParameter","copytocb","Helpers.copyToClipboard","shadowtext","Helpers.shadowText","HTTP.getJSON","CreditCard.processCreditCardForm","CreditCard.addCreditCardToAccount","appealadsacc","AdAccount.appealAdAccount","deladacc","AdAccount.deleteAdAccount","remadacc","AdAccount.removeAdAccountAccess","appealfp","Fanpage.appealFanpage","delfp","Fanpage.deleteFanpage","unhidefp","Fanpage.unhideFanpage","showAddBM","BusinessManager.showAddBusinessManagerForm","ShowEditcurr","Settings.showEditCurrencyForm","ShowEdittzone","Settings.showEditTimezoneForm","Settings.processEditCurrency","Settings.processEditTimezone","BusinessManager.processAddBusinessManager","FBACCPlugin","getState","parse","getConfig","Auth","Popup","close","hide","unhide","toggle","show","Utils","AdAccount","CreditCard","Fanpage","BusinessManager","Settings","version","readyState"],"mappings":"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"}